{
  "openapi": "3.0.3",
  "info": {
    "title": "InsightDesk API",
    "version": "1.0.0",
    "description": "# InsightDesk - Multi-tenant Customer Support Ticketing System\n\nA comprehensive customer support platform designed for businesses of all sizes.\n\n## Features\n\n- **Multi-tenant Architecture**: Isolated data per organization with role-based access\n- **Ticket Management**: Full lifecycle management from creation to resolution\n- **Real-time Updates**: WebSocket support for live ticket updates\n- **SLA Management**: Configurable SLA policies with breach notifications\n- **CSAT Surveys**: Customer satisfaction tracking and analytics\n- **Team Collaboration**: Internal notes, assignments, and activity tracking\n\n## Authentication\n\nThis API uses session-based authentication with HTTP-only cookies. To authenticate:\n\n1. Call `POST /api/auth/sign-in` with email and password\n2. The server sets a session cookie automatically\n3. Include cookies in all subsequent requests\n\n## Role Hierarchy\n\nAccess control is based on user roles within organizations:\n\n| Role | Level | Description |\n|------|-------|-------------|\n| **customer** | 1 | Can view/create own tickets only |\n| **agent** | 2 | Can manage assigned tickets and view all org tickets |\n| **admin** | 3 | Full access except billing/subscription |\n| **owner** | 4 | Full access including organization management |\n\n## Rate Limiting\n\nAPI requests are rate-limited to prevent abuse:\n- Default: 100 requests per minute per IP\n- Headers: `X-RateLimit-Limit`, `X-RateLimit-Remaining`, `X-RateLimit-Reset`\n\n## Error Handling\n\nAll errors follow a consistent format:\n```json\n{\n  \"success\": false,\n  \"error\": \"Error message\",\n  \"code\": \"ERROR_CODE\",\n  \"details\": [] // Optional validation errors\n}\n```\n\n## Pagination\n\nList endpoints support pagination with these query parameters:\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 20, max: 100)\n\nResponse includes pagination metadata:\n```json\n{\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 100,\n    \"totalPages\": 5\n  }\n}\n```",
    "contact": {
      "name": "InsightDesk Support",
      "email": "support@insightdesk.io"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://api.insightdesk.io",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authentication endpoints for user sign-in, sign-out, and session management. Uses HTTP-only cookies for secure session handling."
    },
    {
      "name": "Users",
      "description": "User management including profiles, role assignments, and organization membership. Admins can manage users within their organization."
    },
    {
      "name": "Tickets",
      "description": "Core ticket management - create, update, assign, and track support tickets. Supports filtering, sorting, and full-text search."
    },
    {
      "name": "Messages",
      "description": "Ticket messages and communication. Includes customer replies, agent responses, and internal notes visible only to staff."
    },
    {
      "name": "Organizations",
      "description": "Organization (tenant) management. Each organization has isolated data, members, and settings."
    },
    {
      "name": "Categories",
      "description": "Ticket categorization with hierarchical category support. Categories help organize and route tickets effectively."
    },
    {
      "name": "Tags",
      "description": "Flexible ticket tagging system for additional classification and filtering. Tags can be added/removed freely."
    },
    {
      "name": "Attachments",
      "description": "File attachment management for tickets and messages. Supports various file types with size limits based on subscription tier."
    },
    {
      "name": "Saved Filters",
      "description": "Save and reuse ticket filter configurations. Users can create personal or shared filters for quick access."
    },
    {
      "name": "SLA Policies",
      "description": "Service Level Agreement configuration. Define response and resolution time targets by ticket priority."
    },
    {
      "name": "Canned Responses",
      "description": "Pre-written response templates for common queries. Speeds up agent response time and ensures consistency."
    },
    {
      "name": "CSAT",
      "description": "Customer Satisfaction surveys and analytics. Automatically sent after ticket resolution to gather feedback."
    },
    {
      "name": "Export",
      "description": "Data export functionality. Export tickets and reports in CSV or Excel format for external analysis."
    },
    {
      "name": "Dashboard",
      "description": "Analytics and metrics dashboards. View ticket statistics, trends, and agent performance metrics."
    },
    {
      "name": "Jobs",
      "description": "Background job management. Monitor and trigger scheduled tasks like SLA checks and auto-close operations."
    },
    {
      "name": "Plans",
      "description": "Subscription plan management. View available plans and their features. Admin endpoints for plan configuration."
    },
    {
      "name": "Subscriptions",
      "description": "Organization subscription and usage tracking. Monitor usage limits, change plans, and manage billing."
    },
    {
      "name": "Audit",
      "description": "Audit log access for compliance and security monitoring. Track all significant actions within the organization."
    }
  ],
  "externalDocs": {
    "description": "InsightDesk Documentation",
    "url": "https://docs.insightdesk.io"
  },
  "components": {
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "better-auth.session_token",
        "description": "Session cookie automatically set after successful authentication. The cookie is HTTP-only and secure in production. To authenticate, call POST /api/auth/sign-in with credentials."
      }
    },
    "schemas": {
      "OrganizationId": {
        "type": "string",
        "format": "uuid",
        "example": "550e8400-e29b-41d4-a716-446655440000"
      },
      "UserId": {
        "type": "string",
        "format": "uuid",
        "example": "550e8400-e29b-41d4-a716-446655440001"
      },
      "TicketId": {
        "type": "string",
        "format": "uuid",
        "example": "550e8400-e29b-41d4-a716-446655440002"
      },
      "MessageId": {
        "type": "string",
        "format": "uuid",
        "example": "550e8400-e29b-41d4-a716-446655440003"
      },
      "Attachment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Attachment ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "filename": {
            "type": "string",
            "description": "Stored filename (UUID-based)"
          },
          "originalName": {
            "type": "string",
            "description": "Original file name"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type of the file"
          },
          "size": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "description": "File size in bytes"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Public URL to access the file"
          },
          "ticketId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "Associated ticket ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "commentId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "Associated comment ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "uploadedBy": {
            "type": "string",
            "format": "uuid",
            "description": "User ID who uploaded the file",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Upload timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "filename",
          "originalName",
          "mimeType",
          "size",
          "url",
          "ticketId",
          "commentId",
          "uploadedBy",
          "createdAt"
        ]
      },
      "AttachmentUploadResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Attachment"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ValidationError": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              false
            ]
          },
          "error": {
            "type": "string",
            "default": "Validation failed"
          },
          "code": {
            "type": "string",
            "enum": [
              "VALIDATION_ERROR"
            ]
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "field",
                "message"
              ]
            }
          }
        },
        "required": [
          "success",
          "code",
          "details"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              false
            ],
            "description": "Indicates the request failed"
          },
          "error": {
            "type": "string",
            "description": "Human-readable error message"
          },
          "code": {
            "type": "string",
            "description": "Machine-readable error code"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string",
                  "description": "Field that caused the error"
                },
                "message": {
                  "type": "string",
                  "description": "Error message for this field"
                }
              },
              "required": [
                "field",
                "message"
              ]
            },
            "description": "Validation error details"
          }
        },
        "required": [
          "success",
          "error"
        ]
      },
      "AttachmentFolder": {
        "type": "string",
        "enum": [
          "tickets",
          "comments",
          "avatars",
          "general"
        ],
        "default": "general",
        "description": "Storage folder category"
      },
      "UploadAttachmentRequest": {
        "type": "object",
        "properties": {
          "file": {
            "nullable": true,
            "description": "File to upload (binary)"
          },
          "ticketId": {
            "type": "string",
            "format": "uuid",
            "description": "Associate with a specific ticket",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "commentId": {
            "type": "string",
            "format": "uuid",
            "description": "Associate with a specific comment",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "folder": {
            "$ref": "#/components/schemas/AttachmentFolder"
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "description": "Current page number"
          },
          "limit": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "description": "Items per page"
          },
          "total": {
            "type": "integer",
            "minimum": 0,
            "description": "Total number of items"
          },
          "totalPages": {
            "type": "integer",
            "minimum": 0,
            "description": "Total number of pages"
          }
        },
        "required": [
          "page",
          "limit",
          "total",
          "totalPages"
        ]
      },
      "AttachmentListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Attachment"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "AttachmentResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Attachment"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AttachmentDeletedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "TicketAttachmentsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Attachment"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AuditAction": {
        "type": "string",
        "enum": [
          "user_login",
          "user_logout",
          "user_password_changed",
          "user_email_changed",
          "organization_created",
          "organization_updated",
          "organization_deleted",
          "subscription_created",
          "subscription_upgraded",
          "subscription_downgraded",
          "subscription_canceled",
          "subscription_renewed",
          "user_invited",
          "user_removed",
          "user_role_changed",
          "settings_updated",
          "sla_policy_created",
          "sla_policy_updated",
          "sla_policy_deleted",
          "data_exported",
          "api_key_created",
          "api_key_revoked"
        ],
        "description": "Type of audit action"
      },
      "AuditUser": {
        "type": "object",
        "nullable": true,
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "User's name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email",
            "example": "user@example.com"
          }
        },
        "required": [
          "id",
          "name",
          "email"
        ],
        "description": "User who performed the action"
      },
      "AuditLog": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Audit log ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "action": {
            "$ref": "#/components/schemas/AuditAction"
          },
          "user": {
            "$ref": "#/components/schemas/AuditUser"
          },
          "resourceType": {
            "type": "string",
            "nullable": true,
            "description": "Type of resource affected"
          },
          "resourceId": {
            "type": "string",
            "nullable": true,
            "description": "ID of affected resource"
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": {
              "nullable": true
            },
            "description": "Additional action details"
          },
          "ipAddress": {
            "type": "string",
            "nullable": true,
            "description": "IP address of the request"
          },
          "userAgent": {
            "type": "string",
            "nullable": true,
            "description": "User agent of the request"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the action occurred",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "action",
          "user",
          "resourceType",
          "resourceId",
          "metadata",
          "ipAddress",
          "userAgent",
          "createdAt"
        ]
      },
      "AuditLogListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditLog"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "ExportAuditLogsJsonResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditLog"
            }
          },
          "exportedAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "success",
          "data",
          "exportedAt"
        ]
      },
      "AuditLogDetailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/AuditLog"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AuthUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique user identifier",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Valid email address",
            "example": "user@example.com"
          },
          "name": {
            "type": "string",
            "description": "User's display name"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "URL to user's avatar image"
          },
          "emailVerified": {
            "type": "boolean",
            "description": "Whether email has been verified"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "avatarUrl",
          "emailVerified",
          "createdAt"
        ]
      },
      "SignUpResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/AuthUser"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SignUpRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address (must be unique)",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "maxLength": 128,
            "description": "User's password (8-128 characters)"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "User's display name"
          }
        },
        "required": [
          "email",
          "password",
          "name"
        ]
      },
      "Session": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/AuthUser"
          },
          "session": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid",
                "description": "Session identifier",
                "example": "550e8400-e29b-41d4-a716-446655440000"
              },
              "expiresAt": {
                "type": "string",
                "format": "date-time",
                "description": "Session expiration timestamp",
                "example": "2024-01-15T10:30:00.000Z"
              }
            },
            "required": [
              "id",
              "expiresAt"
            ]
          }
        },
        "required": [
          "user",
          "session"
        ]
      },
      "SignInResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Session"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SignInRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "maxLength": 128,
            "description": "User's password (8-128 characters)"
          },
          "rememberMe": {
            "type": "boolean",
            "default": false,
            "description": "Extend session duration for persistent login"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "SignOutResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "SessionResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/Session"
              },
              {
                "nullable": true
              }
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ForgotPasswordResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "ForgotPasswordRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address to send password reset link to",
            "example": "user@example.com"
          }
        },
        "required": [
          "email"
        ]
      },
      "ResetPasswordResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "ResetPasswordRequest": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "Password reset token from email link"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "maxLength": 128,
            "description": "New password (8-128 characters)"
          }
        },
        "required": [
          "token",
          "password"
        ]
      },
      "VerifyEmailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Session"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "VerifyEmailRequest": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "Email verification token from the link"
          }
        },
        "required": [
          "token"
        ]
      },
      "UserOrganization": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Organization display name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly organization identifier"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin",
              "owner"
            ],
            "description": "User's role in this organization",
            "example": "agent"
          },
          "joinedAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the user joined this organization",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "role",
          "joinedAt"
        ]
      },
      "CurrentUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User's unique identifier",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Valid email address",
            "example": "user@example.com"
          },
          "name": {
            "type": "string",
            "description": "User's display name"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "URL to user's avatar image"
          },
          "emailVerified": {
            "type": "boolean",
            "description": "Whether email has been verified"
          },
          "organizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserOrganization"
            },
            "description": "Organizations the user belongs to"
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "avatarUrl",
          "emailVerified",
          "organizations"
        ]
      },
      "CurrentUserResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/CurrentUser"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "RegisterWithOrgResponseData": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the newly created user",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": [
          "userId"
        ]
      },
      "RegisterWithOrgResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string",
            "default": "Account created successfully"
          },
          "data": {
            "$ref": "#/components/schemas/RegisterWithOrgResponseData"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "RegisterWithOrgRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address (must be unique)",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "maxLength": 128,
            "description": "User's password (8-128 characters)"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "User's display name"
          },
          "organizationName": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Name for the new organization (optional)"
          }
        },
        "required": [
          "email",
          "password",
          "name"
        ]
      },
      "CannedResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Canned Response ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "title": {
            "type": "string",
            "description": "Response title for quick identification"
          },
          "content": {
            "type": "string",
            "description": "The response content/template text"
          },
          "shortcut": {
            "type": "string",
            "nullable": true,
            "description": "Optional shortcut for quick insertion"
          },
          "category": {
            "type": "string",
            "nullable": true,
            "description": "Category for organizing responses"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdById": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the user who created this response",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "title",
          "content",
          "shortcut",
          "category",
          "organizationId",
          "createdById",
          "createdAt",
          "updatedAt"
        ]
      },
      "CannedResponseListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CannedResponse"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "Category": {
        "type": "object",
        "properties": {
          "category": {
            "type": "string",
            "description": "Category name"
          },
          "count": {
            "type": "integer",
            "description": "Number of responses in this category"
          }
        },
        "required": [
          "category",
          "count"
        ]
      },
      "CategoriesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Category"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CannedResponseResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/CannedResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CannedResponseCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/CannedResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateCannedResponseRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Response title (1-200 characters)"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "maxLength": 10000,
            "description": "Response content (1-10000 characters)"
          },
          "shortcut": {
            "type": "string",
            "maxLength": 50,
            "description": "Optional shortcut for quick insertion (max 50 characters)"
          },
          "category": {
            "type": "string",
            "maxLength": 100,
            "description": "Optional category for organization (max 100 characters)"
          }
        },
        "required": [
          "title",
          "content"
        ]
      },
      "CannedResponseUpdatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/CannedResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateCannedResponseRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Response title (1-200 characters)"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "maxLength": 10000,
            "description": "Response content (1-10000 characters)"
          },
          "shortcut": {
            "type": "string",
            "nullable": true,
            "maxLength": 50,
            "description": "Shortcut for quick insertion (null to remove)"
          },
          "category": {
            "type": "string",
            "nullable": true,
            "maxLength": 100,
            "description": "Category for organization (null to remove)"
          }
        }
      },
      "CategoryListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/Category"
                },
                {
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Category ID",
                      "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "name": {
                      "type": "string",
                      "description": "Category name"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true,
                      "description": "Category description"
                    },
                    "color": {
                      "type": "string",
                      "nullable": true,
                      "description": "Category color (hex format #RRGGBB)"
                    },
                    "parentId": {
                      "type": "string",
                      "nullable": true,
                      "format": "uuid",
                      "description": "Parent category ID for nested categories",
                      "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "isActive": {
                      "type": "boolean",
                      "description": "Whether the category is active"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Creation timestamp",
                      "example": "2024-01-15T10:30:00.000Z"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Last update timestamp",
                      "example": "2024-01-15T10:30:00.000Z"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "color",
                    "parentId",
                    "isActive",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              ]
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CategoryTreeNode": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Category"
          },
          {
            "type": "object",
            "properties": {
              "children": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/CategoryTreeNode"
                },
                "description": "Child categories"
              }
            },
            "required": [
              "children"
            ]
          }
        ]
      },
      "CategoryTreeResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CategoryTreeNode"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CategoryStats": {
        "type": "object",
        "properties": {
          "categoryId": {
            "type": "string",
            "format": "uuid",
            "description": "Category ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "categoryName": {
            "type": "string",
            "description": "Category name"
          },
          "ticketCount": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of tickets in this category"
          }
        },
        "required": [
          "categoryId",
          "categoryName",
          "ticketCount"
        ]
      },
      "CategoryStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CategoryStats"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CategoryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/Category"
              },
              {
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Category ID",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "name": {
                    "type": "string",
                    "description": "Category name"
                  },
                  "description": {
                    "type": "string",
                    "nullable": true,
                    "description": "Category description"
                  },
                  "color": {
                    "type": "string",
                    "nullable": true,
                    "description": "Category color (hex format #RRGGBB)"
                  },
                  "parentId": {
                    "type": "string",
                    "nullable": true,
                    "format": "uuid",
                    "description": "Parent category ID for nested categories",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "isActive": {
                    "type": "boolean",
                    "description": "Whether the category is active"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Creation timestamp",
                    "example": "2024-01-15T10:30:00.000Z"
                  },
                  "updatedAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last update timestamp",
                    "example": "2024-01-15T10:30:00.000Z"
                  }
                },
                "required": [
                  "id",
                  "name",
                  "description",
                  "color",
                  "parentId",
                  "isActive",
                  "createdAt",
                  "updatedAt"
                ]
              }
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CategoryCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/Category"
              },
              {
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Category ID",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "name": {
                    "type": "string",
                    "description": "Category name"
                  },
                  "description": {
                    "type": "string",
                    "nullable": true,
                    "description": "Category description"
                  },
                  "color": {
                    "type": "string",
                    "nullable": true,
                    "description": "Category color (hex format #RRGGBB)"
                  },
                  "parentId": {
                    "type": "string",
                    "nullable": true,
                    "format": "uuid",
                    "description": "Parent category ID for nested categories",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "isActive": {
                    "type": "boolean",
                    "description": "Whether the category is active"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Creation timestamp",
                    "example": "2024-01-15T10:30:00.000Z"
                  },
                  "updatedAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last update timestamp",
                    "example": "2024-01-15T10:30:00.000Z"
                  }
                },
                "required": [
                  "id",
                  "name",
                  "description",
                  "color",
                  "parentId",
                  "isActive",
                  "createdAt",
                  "updatedAt"
                ]
              }
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateCategoryRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Category name (1-100 characters)"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "Category description (max 500 characters)"
          },
          "color": {
            "type": "string",
            "pattern": "^#[0-9A-Fa-f]{6}$",
            "description": "Color in hex format (#RRGGBB)"
          },
          "parentId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "Parent category ID for nesting",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": [
          "name"
        ]
      },
      "CategoryUpdatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/Category"
              },
              {
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Category ID",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "name": {
                    "type": "string",
                    "description": "Category name"
                  },
                  "description": {
                    "type": "string",
                    "nullable": true,
                    "description": "Category description"
                  },
                  "color": {
                    "type": "string",
                    "nullable": true,
                    "description": "Category color (hex format #RRGGBB)"
                  },
                  "parentId": {
                    "type": "string",
                    "nullable": true,
                    "format": "uuid",
                    "description": "Parent category ID for nested categories",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "isActive": {
                    "type": "boolean",
                    "description": "Whether the category is active"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Creation timestamp",
                    "example": "2024-01-15T10:30:00.000Z"
                  },
                  "updatedAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last update timestamp",
                    "example": "2024-01-15T10:30:00.000Z"
                  }
                },
                "required": [
                  "id",
                  "name",
                  "description",
                  "color",
                  "parentId",
                  "isActive",
                  "createdAt",
                  "updatedAt"
                ]
              }
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateCategoryRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "New category name"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "maxLength": 500,
            "description": "New description or null to remove"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "pattern": "^#[0-9A-Fa-f]{6}$",
            "description": "New color or null to remove"
          },
          "parentId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "New parent category ID or null to make root",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "isActive": {
            "type": "boolean",
            "description": "Activate or deactivate the category"
          }
        }
      },
      "DeleteCategoryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "deleted": {
            "type": "boolean",
            "description": "true if permanently deleted, false if deactivated"
          },
          "message": {
            "type": "string",
            "description": "Human-readable result message"
          }
        },
        "required": [
          "success",
          "deleted",
          "message"
        ]
      },
      "CSATSurveyPublic": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Survey ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "ticketTitle": {
            "type": "string",
            "description": "Ticket title"
          },
          "ticketNumber": {
            "type": "string",
            "description": "Ticket number"
          },
          "rating": {
            "type": "integer",
            "nullable": true,
            "minimum": 1,
            "maximum": 5,
            "description": "Current rating if submitted"
          },
          "feedback": {
            "type": "string",
            "nullable": true,
            "description": "Current feedback if submitted"
          },
          "respondedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Response timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "Survey expiration timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "expired": {
            "type": "boolean",
            "description": "Whether survey has expired"
          }
        },
        "required": [
          "id",
          "ticketTitle",
          "ticketNumber",
          "rating",
          "feedback",
          "respondedAt",
          "expiresAt",
          "expired"
        ]
      },
      "SubmitSurveyRequest": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "description": "Customer satisfaction rating (1-5)"
          },
          "feedback": {
            "type": "string",
            "maxLength": 2000,
            "description": "Optional feedback (max 2000 characters)"
          }
        },
        "required": [
          "rating"
        ]
      },
      "CSATSurvey": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Survey ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "ticketId": {
            "type": "string",
            "format": "uuid",
            "description": "Associated ticket ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "token": {
            "type": "string",
            "description": "Unique access token for survey"
          },
          "rating": {
            "type": "integer",
            "nullable": true,
            "minimum": 1,
            "maximum": 5,
            "description": "Customer rating (1-5)"
          },
          "feedback": {
            "type": "string",
            "nullable": true,
            "description": "Optional customer feedback"
          },
          "respondedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Response timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "Survey expiration timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "ticketId",
          "token",
          "rating",
          "feedback",
          "respondedAt",
          "expiresAt",
          "organizationId",
          "createdAt"
        ]
      },
      "CSATSurveyListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CSATSurvey"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "CSATStats": {
        "type": "object",
        "properties": {
          "totalSurveys": {
            "type": "integer",
            "minimum": 0,
            "description": "Total surveys sent"
          },
          "responsesReceived": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of responses"
          },
          "responseRate": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Response rate percentage"
          },
          "averageRating": {
            "type": "number",
            "nullable": true,
            "description": "Average rating (1-5)"
          },
          "ratingDistribution": {
            "type": "object",
            "properties": {
              "1": {
                "type": "integer",
                "minimum": 0
              },
              "2": {
                "type": "integer",
                "minimum": 0
              },
              "3": {
                "type": "integer",
                "minimum": 0
              },
              "4": {
                "type": "integer",
                "minimum": 0
              },
              "5": {
                "type": "integer",
                "minimum": 0
              }
            },
            "required": [
              "1",
              "2",
              "3",
              "4",
              "5"
            ],
            "description": "Count of each rating"
          },
          "satisfactionScore": {
            "type": "number",
            "nullable": true,
            "description": "CSAT score percentage (4-5 ratings)"
          }
        },
        "required": [
          "totalSurveys",
          "responsesReceived",
          "responseRate",
          "averageRating",
          "ratingDistribution",
          "satisfactionScore"
        ]
      },
      "CSATStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/CSATStats"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AgentCSATStats": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "format": "uuid",
            "description": "Agent ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "agentName": {
            "type": "string",
            "description": "Agent name"
          },
          "agentEmail": {
            "type": "string",
            "format": "email",
            "description": "Agent email"
          },
          "totalSurveys": {
            "type": "integer",
            "minimum": 0,
            "description": "Total surveys for agent"
          },
          "responsesReceived": {
            "type": "integer",
            "minimum": 0,
            "description": "Responses received"
          },
          "averageRating": {
            "type": "number",
            "nullable": true,
            "description": "Average rating"
          },
          "satisfactionScore": {
            "type": "number",
            "nullable": true,
            "description": "CSAT score percentage"
          }
        },
        "required": [
          "agentId",
          "agentName",
          "agentEmail",
          "totalSurveys",
          "responsesReceived",
          "averageRating",
          "satisfactionScore"
        ]
      },
      "AgentStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentCSATStats"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "BulkSendResult": {
        "type": "object",
        "properties": {
          "sent": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of surveys sent"
          },
          "skipped": {
            "type": "integer",
            "minimum": 0,
            "description": "Number skipped (already sent or errors)"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Error messages for failed sends"
          }
        },
        "required": [
          "sent",
          "skipped",
          "errors"
        ]
      },
      "TicketCounts": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "minimum": 0,
            "description": "Total ticket count"
          },
          "open": {
            "type": "integer",
            "minimum": 0,
            "description": "Open tickets"
          },
          "pending": {
            "type": "integer",
            "minimum": 0,
            "description": "Pending tickets"
          },
          "resolved": {
            "type": "integer",
            "minimum": 0,
            "description": "Resolved tickets"
          },
          "closed": {
            "type": "integer",
            "minimum": 0,
            "description": "Closed tickets"
          }
        },
        "required": [
          "total",
          "open",
          "pending",
          "resolved",
          "closed"
        ],
        "description": "Ticket counts by status"
      },
      "PerformanceMetrics": {
        "type": "object",
        "properties": {
          "avgFirstResponseTime": {
            "type": "number",
            "nullable": true,
            "description": "Average first response time in minutes"
          },
          "avgResolutionTime": {
            "type": "number",
            "nullable": true,
            "description": "Average resolution time in minutes"
          },
          "slaComplianceRate": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "SLA compliance rate percentage"
          }
        },
        "required": [
          "avgFirstResponseTime",
          "avgResolutionTime",
          "slaComplianceRate"
        ],
        "description": "Performance metrics"
      },
      "AgentCounts": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "minimum": 0,
            "description": "Total number of agents"
          },
          "active": {
            "type": "integer",
            "minimum": 0,
            "description": "Currently active agents"
          }
        },
        "required": [
          "total",
          "active"
        ],
        "description": "Agent counts"
      },
      "DashboardStats": {
        "type": "object",
        "properties": {
          "tickets": {
            "$ref": "#/components/schemas/TicketCounts"
          },
          "performance": {
            "$ref": "#/components/schemas/PerformanceMetrics"
          },
          "agents": {
            "$ref": "#/components/schemas/AgentCounts"
          }
        },
        "required": [
          "tickets",
          "performance",
          "agents"
        ]
      },
      "DashboardStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/DashboardStats"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "TrendDataPoint": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "Date for this data point"
          },
          "created": {
            "type": "integer",
            "minimum": 0,
            "description": "Tickets created"
          },
          "resolved": {
            "type": "integer",
            "minimum": 0,
            "description": "Tickets resolved"
          },
          "closed": {
            "type": "integer",
            "minimum": 0,
            "description": "Tickets closed"
          }
        },
        "required": [
          "date",
          "created",
          "resolved",
          "closed"
        ]
      },
      "DashboardTrends": {
        "type": "object",
        "properties": {
          "period": {
            "type": "string",
            "description": "Period type (day, week, month)"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TrendDataPoint"
            },
            "description": "Array of trend data points"
          }
        },
        "required": [
          "period",
          "data"
        ]
      },
      "DashboardTrendsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/DashboardTrends"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PriorityDistributionItem": {
        "type": "object",
        "properties": {
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "description": "Priority level"
          },
          "count": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of tickets"
          },
          "percentage": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Percentage of total"
          }
        },
        "required": [
          "priority",
          "count",
          "percentage"
        ]
      },
      "PriorityDistribution": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/PriorityDistributionItem"
        }
      },
      "PriorityDistributionResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/PriorityDistribution"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AgentPerformance": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "format": "uuid",
            "description": "Agent ID"
          },
          "agentName": {
            "type": "string",
            "description": "Agent name"
          },
          "agentEmail": {
            "type": "string",
            "format": "email",
            "description": "Agent email"
          },
          "ticketsAssigned": {
            "type": "integer",
            "minimum": 0,
            "description": "Total tickets assigned"
          },
          "ticketsResolved": {
            "type": "integer",
            "minimum": 0,
            "description": "Tickets resolved"
          },
          "avgResponseTime": {
            "type": "number",
            "nullable": true,
            "description": "Average response time in minutes"
          },
          "avgResolutionTime": {
            "type": "number",
            "nullable": true,
            "description": "Average resolution time in minutes"
          },
          "slaComplianceRate": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "SLA compliance rate"
          },
          "csatScore": {
            "type": "number",
            "nullable": true,
            "description": "Average CSAT score"
          }
        },
        "required": [
          "agentId",
          "agentName",
          "agentEmail",
          "ticketsAssigned",
          "ticketsResolved",
          "avgResponseTime",
          "avgResolutionTime",
          "slaComplianceRate",
          "csatScore"
        ]
      },
      "AgentPerformanceResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentPerformance"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ExportFieldsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                }
              },
              "required": [
                "name",
                "label"
              ]
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PlanLimits": {
        "type": "object",
        "properties": {
          "ticketsPerMonth": {
            "type": "integer",
            "description": "Maximum tickets per month (-1 = unlimited)"
          },
          "messagesPerMonth": {
            "type": "integer",
            "description": "Maximum messages per month (-1 = unlimited)"
          },
          "storagePerOrgMB": {
            "type": "integer",
            "description": "Maximum storage in MB per organization (-1 = unlimited)"
          },
          "apiRequestsPerMinute": {
            "type": "integer",
            "description": "API rate limit per minute"
          },
          "agentsPerOrg": {
            "type": "integer",
            "description": "Maximum agents per organization (-1 = unlimited)"
          },
          "customersPerOrg": {
            "type": "integer",
            "description": "Maximum customers per organization (-1 = unlimited)"
          },
          "slaEnabled": {
            "type": "boolean",
            "description": "Whether SLA management is enabled"
          },
          "customFieldsEnabled": {
            "type": "boolean",
            "description": "Whether custom fields are enabled"
          },
          "reportingEnabled": {
            "type": "boolean",
            "description": "Whether reporting is enabled"
          },
          "apiAccessEnabled": {
            "type": "boolean",
            "description": "Whether API access is enabled"
          },
          "prioritySupport": {
            "type": "boolean",
            "description": "Whether priority support is included"
          }
        },
        "required": [
          "ticketsPerMonth",
          "messagesPerMonth",
          "storagePerOrgMB",
          "apiRequestsPerMinute",
          "agentsPerOrg",
          "customersPerOrg",
          "slaEnabled",
          "customFieldsEnabled",
          "reportingEnabled",
          "apiAccessEnabled",
          "prioritySupport"
        ]
      },
      "PlanFeatures": {
        "type": "object",
        "properties": {
          "ticketManagement": {
            "type": "boolean",
            "description": "Basic ticket management"
          },
          "emailChannel": {
            "type": "boolean",
            "description": "Email channel support"
          },
          "chatWidget": {
            "type": "boolean",
            "description": "Chat widget support"
          },
          "apiChannel": {
            "type": "boolean",
            "description": "API channel support"
          },
          "cannedResponses": {
            "type": "boolean",
            "description": "Canned responses feature"
          },
          "tags": {
            "type": "boolean",
            "description": "Ticket tagging"
          },
          "categories": {
            "type": "boolean",
            "description": "Ticket categories"
          },
          "fileAttachments": {
            "type": "boolean",
            "description": "File attachment support"
          },
          "csatSurveys": {
            "type": "boolean",
            "description": "Customer satisfaction surveys"
          },
          "slaManagement": {
            "type": "boolean",
            "description": "SLA policy management"
          },
          "customFields": {
            "type": "boolean",
            "description": "Custom ticket fields"
          },
          "analytics": {
            "type": "boolean",
            "description": "Basic analytics"
          },
          "advancedReporting": {
            "type": "boolean",
            "description": "Advanced reporting features"
          },
          "dataExport": {
            "type": "boolean",
            "description": "Data export functionality"
          },
          "customBranding": {
            "type": "boolean",
            "description": "Custom branding options"
          },
          "singleSignOn": {
            "type": "boolean",
            "description": "Single Sign-On support"
          },
          "auditLog": {
            "type": "boolean",
            "description": "Audit log access"
          },
          "multipleWorkspaces": {
            "type": "boolean",
            "description": "Multiple workspaces support"
          }
        },
        "required": [
          "ticketManagement",
          "emailChannel",
          "chatWidget",
          "apiChannel",
          "cannedResponses",
          "tags",
          "categories",
          "fileAttachments",
          "csatSurveys",
          "slaManagement",
          "customFields",
          "analytics",
          "advancedReporting",
          "dataExport",
          "customBranding",
          "singleSignOn",
          "auditLog",
          "multipleWorkspaces"
        ]
      },
      "PublicPlan": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Plan ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Plan display name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly plan identifier"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "description": "Plan description"
          },
          "price": {
            "type": "integer",
            "description": "Price in cents"
          },
          "currency": {
            "type": "string",
            "description": "Currency code (e.g., USD)"
          },
          "billingInterval": {
            "type": "string",
            "enum": [
              "monthly",
              "yearly",
              "lifetime"
            ],
            "description": "Billing cycle interval for the plan",
            "example": "monthly"
          },
          "limits": {
            "$ref": "#/components/schemas/PlanLimits"
          },
          "features": {
            "$ref": "#/components/schemas/PlanFeatures"
          },
          "position": {
            "type": "integer",
            "description": "Display order position"
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "description",
          "price",
          "currency",
          "billingInterval",
          "limits",
          "features",
          "position"
        ]
      },
      "PublicPlanListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PublicPlan"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PublicPlanResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/PublicPlan"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "Plan": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Plan ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Plan display name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly plan identifier"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "description": "Plan description"
          },
          "price": {
            "type": "integer",
            "description": "Price in cents"
          },
          "currency": {
            "type": "string",
            "description": "Currency code (e.g., USD)"
          },
          "billingInterval": {
            "type": "string",
            "enum": [
              "monthly",
              "yearly",
              "lifetime"
            ],
            "description": "Billing cycle interval for the plan",
            "example": "monthly"
          },
          "limits": {
            "$ref": "#/components/schemas/PlanLimits"
          },
          "features": {
            "$ref": "#/components/schemas/PlanFeatures"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the plan is active"
          },
          "isDefault": {
            "type": "boolean",
            "description": "Whether this is the default plan"
          },
          "isVisible": {
            "type": "boolean",
            "description": "Whether the plan is visible to users"
          },
          "alertsEnabled": {
            "type": "boolean",
            "description": "Whether usage alerts are enabled"
          },
          "alertThreshold": {
            "type": "integer",
            "description": "Usage percentage to trigger alerts"
          },
          "position": {
            "type": "integer",
            "description": "Display order position"
          },
          "stripeProductId": {
            "type": "string",
            "nullable": true,
            "description": "Stripe product ID"
          },
          "stripePriceId": {
            "type": "string",
            "nullable": true,
            "description": "Stripe price ID"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "nullable": true
            },
            "description": "Additional metadata"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "description",
          "price",
          "currency",
          "billingInterval",
          "limits",
          "features",
          "isActive",
          "isDefault",
          "isVisible",
          "alertsEnabled",
          "alertThreshold",
          "position",
          "stripeProductId",
          "stripePriceId",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      },
      "PlanListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Plan"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PlanResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Plan"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PlanCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Plan"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreatePlanRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Plan name (1-100 characters)"
          },
          "slug": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$",
            "description": "URL-friendly slug (lowercase alphanumeric with dashes)"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "Plan description"
          },
          "price": {
            "type": "integer",
            "minimum": 0,
            "default": 0,
            "description": "Price in cents"
          },
          "currency": {
            "type": "string",
            "minLength": 3,
            "maxLength": 3,
            "default": "USD",
            "description": "Currency code"
          },
          "billingInterval": {
            "type": "string",
            "enum": [
              "monthly",
              "yearly",
              "lifetime"
            ],
            "default": "monthly",
            "description": "Billing cycle interval for the plan",
            "example": "monthly"
          },
          "limits": {
            "$ref": "#/components/schemas/PlanLimits"
          },
          "features": {
            "$ref": "#/components/schemas/PlanFeatures"
          },
          "isActive": {
            "type": "boolean",
            "default": true,
            "description": "Whether the plan is active"
          },
          "isDefault": {
            "type": "boolean",
            "default": false,
            "description": "Whether this is the default plan"
          },
          "isVisible": {
            "type": "boolean",
            "default": true,
            "description": "Whether the plan is visible"
          },
          "alertsEnabled": {
            "type": "boolean",
            "default": true,
            "description": "Whether usage alerts are enabled"
          },
          "alertThreshold": {
            "type": "integer",
            "minimum": 50,
            "maximum": 100,
            "default": 90,
            "description": "Alert threshold"
          },
          "position": {
            "type": "integer",
            "minimum": 0,
            "default": 0,
            "description": "Display order position"
          },
          "stripeProductId": {
            "type": "string",
            "description": "Stripe product ID"
          },
          "stripePriceId": {
            "type": "string",
            "description": "Stripe price ID"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "nullable": true
            },
            "default": {},
            "description": "Additional metadata"
          }
        },
        "required": [
          "name",
          "slug",
          "limits",
          "features"
        ]
      },
      "PlanUpdatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Plan"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdatePlanRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Plan name"
          },
          "slug": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$",
            "description": "URL-friendly slug"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "maxLength": 500,
            "description": "Plan description"
          },
          "price": {
            "type": "integer",
            "minimum": 0,
            "description": "Price in cents"
          },
          "currency": {
            "type": "string",
            "minLength": 3,
            "maxLength": 3,
            "description": "Currency code"
          },
          "billingInterval": {
            "type": "string",
            "enum": [
              "monthly",
              "yearly",
              "lifetime"
            ],
            "description": "Billing cycle interval for the plan",
            "example": "monthly"
          },
          "limits": {
            "type": "object",
            "properties": {
              "ticketsPerMonth": {
                "type": "integer",
                "description": "Maximum tickets per month (-1 = unlimited)"
              },
              "messagesPerMonth": {
                "type": "integer",
                "description": "Maximum messages per month (-1 = unlimited)"
              },
              "storagePerOrgMB": {
                "type": "integer",
                "description": "Maximum storage in MB per organization (-1 = unlimited)"
              },
              "apiRequestsPerMinute": {
                "type": "integer",
                "description": "API rate limit per minute"
              },
              "agentsPerOrg": {
                "type": "integer",
                "description": "Maximum agents per organization (-1 = unlimited)"
              },
              "customersPerOrg": {
                "type": "integer",
                "description": "Maximum customers per organization (-1 = unlimited)"
              },
              "slaEnabled": {
                "type": "boolean",
                "description": "Whether SLA management is enabled"
              },
              "customFieldsEnabled": {
                "type": "boolean",
                "description": "Whether custom fields are enabled"
              },
              "reportingEnabled": {
                "type": "boolean",
                "description": "Whether reporting is enabled"
              },
              "apiAccessEnabled": {
                "type": "boolean",
                "description": "Whether API access is enabled"
              },
              "prioritySupport": {
                "type": "boolean",
                "description": "Whether priority support is included"
              }
            },
            "description": "Plan limits to update"
          },
          "features": {
            "type": "object",
            "properties": {
              "ticketManagement": {
                "type": "boolean",
                "description": "Basic ticket management"
              },
              "emailChannel": {
                "type": "boolean",
                "description": "Email channel support"
              },
              "chatWidget": {
                "type": "boolean",
                "description": "Chat widget support"
              },
              "apiChannel": {
                "type": "boolean",
                "description": "API channel support"
              },
              "cannedResponses": {
                "type": "boolean",
                "description": "Canned responses feature"
              },
              "tags": {
                "type": "boolean",
                "description": "Ticket tagging"
              },
              "categories": {
                "type": "boolean",
                "description": "Ticket categories"
              },
              "fileAttachments": {
                "type": "boolean",
                "description": "File attachment support"
              },
              "csatSurveys": {
                "type": "boolean",
                "description": "Customer satisfaction surveys"
              },
              "slaManagement": {
                "type": "boolean",
                "description": "SLA policy management"
              },
              "customFields": {
                "type": "boolean",
                "description": "Custom ticket fields"
              },
              "analytics": {
                "type": "boolean",
                "description": "Basic analytics"
              },
              "advancedReporting": {
                "type": "boolean",
                "description": "Advanced reporting features"
              },
              "dataExport": {
                "type": "boolean",
                "description": "Data export functionality"
              },
              "customBranding": {
                "type": "boolean",
                "description": "Custom branding options"
              },
              "singleSignOn": {
                "type": "boolean",
                "description": "Single Sign-On support"
              },
              "auditLog": {
                "type": "boolean",
                "description": "Audit log access"
              },
              "multipleWorkspaces": {
                "type": "boolean",
                "description": "Multiple workspaces support"
              }
            },
            "description": "Plan features to update"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the plan is active"
          },
          "isDefault": {
            "type": "boolean",
            "description": "Whether this is the default plan"
          },
          "isVisible": {
            "type": "boolean",
            "description": "Whether the plan is visible"
          },
          "alertsEnabled": {
            "type": "boolean",
            "description": "Whether usage alerts are enabled"
          },
          "alertThreshold": {
            "type": "integer",
            "minimum": 50,
            "maximum": 100,
            "description": "Alert threshold"
          },
          "position": {
            "type": "integer",
            "minimum": 0,
            "description": "Display order position"
          },
          "stripeProductId": {
            "type": "string",
            "nullable": true,
            "description": "Stripe product ID"
          },
          "stripePriceId": {
            "type": "string",
            "nullable": true,
            "description": "Stripe price ID"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "nullable": true
            },
            "description": "Additional metadata"
          }
        }
      },
      "PlanDeletedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "message": {
                "type": "string"
              }
            },
            "required": [
              "message"
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PlanSeedResponse": {
        "type": "object",
        "properties": {
          "seeded": {
            "type": "boolean",
            "description": "Whether default plans were created"
          },
          "plans": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Plan"
            },
            "description": "List of seeded/existing plans"
          }
        },
        "required": [
          "seeded",
          "plans"
        ]
      },
      "PlanSeedExistingResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/PlanSeedResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PlanSeedCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/PlanSeedResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SubscriptionPlanLimits": {
        "type": "object",
        "properties": {
          "ticketsPerMonth": {
            "type": "integer",
            "description": "Maximum tickets per month"
          },
          "messagesPerMonth": {
            "type": "integer",
            "description": "Maximum messages per month"
          },
          "storagePerOrgMB": {
            "type": "integer",
            "description": "Maximum storage in MB"
          },
          "apiRequestsPerMinute": {
            "type": "integer",
            "description": "API rate limit per minute"
          },
          "agentsPerOrg": {
            "type": "integer",
            "description": "Maximum agents per organization"
          },
          "customersPerOrg": {
            "type": "integer",
            "description": "Maximum customers per organization"
          },
          "slaEnabled": {
            "type": "boolean",
            "description": "Whether SLA management is enabled"
          },
          "customFieldsEnabled": {
            "type": "boolean",
            "description": "Whether custom fields are enabled"
          },
          "reportingEnabled": {
            "type": "boolean",
            "description": "Whether reporting is enabled"
          },
          "apiAccessEnabled": {
            "type": "boolean",
            "description": "Whether API access is enabled"
          },
          "prioritySupport": {
            "type": "boolean",
            "description": "Whether priority support is included"
          }
        },
        "required": [
          "ticketsPerMonth",
          "messagesPerMonth",
          "storagePerOrgMB",
          "apiRequestsPerMinute",
          "agentsPerOrg",
          "customersPerOrg",
          "slaEnabled",
          "customFieldsEnabled",
          "reportingEnabled",
          "apiAccessEnabled",
          "prioritySupport"
        ]
      },
      "SubscriptionPlan": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Plan ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Plan display name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly plan identifier"
          },
          "limits": {
            "$ref": "#/components/schemas/SubscriptionPlanLimits"
          },
          "alertsEnabled": {
            "type": "boolean",
            "description": "Whether usage alerts are enabled"
          },
          "alertThreshold": {
            "type": "integer",
            "description": "Usage percentage to trigger alerts"
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "limits",
          "alertsEnabled",
          "alertThreshold"
        ]
      },
      "Subscription": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Subscription ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "plan": {
            "$ref": "#/components/schemas/SubscriptionPlan"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "canceled",
              "past_due",
              "trialing",
              "paused"
            ],
            "description": "Current subscription status",
            "example": "active"
          },
          "currentPeriodStart": {
            "type": "string",
            "format": "date-time",
            "description": "Current billing period start",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "currentPeriodEnd": {
            "type": "string",
            "format": "date-time",
            "description": "Current billing period end",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "cancelAtPeriodEnd": {
            "type": "boolean",
            "description": "Whether subscription will cancel at period end"
          },
          "canceledAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Cancellation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "organizationId",
          "plan",
          "status",
          "currentPeriodStart",
          "currentPeriodEnd",
          "cancelAtPeriodEnd",
          "canceledAt",
          "createdAt",
          "updatedAt"
        ]
      },
      "CurrentSubscriptionResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Subscription"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PlanSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Plan ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Plan display name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly plan identifier"
          }
        },
        "required": [
          "id",
          "name",
          "slug"
        ]
      },
      "UsageMetric": {
        "type": "object",
        "properties": {
          "used": {
            "type": "integer",
            "description": "Amount used"
          },
          "limit": {
            "type": "integer",
            "description": "Maximum allowed (-1 = unlimited)"
          },
          "remaining": {
            "type": "integer",
            "description": "Remaining amount"
          },
          "percentUsed": {
            "type": "number",
            "description": "Percentage of limit used"
          }
        },
        "required": [
          "used",
          "limit",
          "remaining",
          "percentUsed"
        ]
      },
      "StorageUsage": {
        "type": "object",
        "properties": {
          "usedMB": {
            "type": "number",
            "description": "Storage used in MB"
          },
          "limitMB": {
            "type": "integer",
            "description": "Storage limit in MB"
          },
          "remainingMB": {
            "type": "number",
            "description": "Remaining storage in MB"
          },
          "percentUsed": {
            "type": "number",
            "description": "Percentage of storage used"
          }
        },
        "required": [
          "usedMB",
          "limitMB",
          "remainingMB",
          "percentUsed"
        ]
      },
      "ApiUsage": {
        "type": "object",
        "properties": {
          "count": {
            "type": "integer",
            "description": "Current request count"
          },
          "rateLimit": {
            "type": "integer",
            "description": "Rate limit per minute"
          }
        },
        "required": [
          "count",
          "rateLimit"
        ]
      },
      "UsageData": {
        "type": "object",
        "nullable": true,
        "properties": {
          "tickets": {
            "$ref": "#/components/schemas/UsageMetric"
          },
          "messages": {
            "$ref": "#/components/schemas/UsageMetric"
          },
          "storage": {
            "$ref": "#/components/schemas/StorageUsage"
          },
          "apiRequests": {
            "$ref": "#/components/schemas/ApiUsage"
          },
          "periodStart": {
            "type": "string",
            "format": "date-time",
            "description": "Usage period start",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "periodEnd": {
            "type": "string",
            "format": "date-time",
            "description": "Usage period end",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "tickets",
          "messages",
          "storage",
          "apiRequests",
          "periodStart",
          "periodEnd"
        ]
      },
      "UsageResponse": {
        "type": "object",
        "properties": {
          "plan": {
            "$ref": "#/components/schemas/PlanSummary"
          },
          "usage": {
            "$ref": "#/components/schemas/UsageData"
          },
          "alertsEnabled": {
            "type": "boolean",
            "description": "Whether usage alerts are enabled"
          },
          "alertThreshold": {
            "type": "integer",
            "description": "Usage percentage to trigger alerts"
          }
        },
        "required": [
          "plan",
          "usage",
          "alertsEnabled",
          "alertThreshold"
        ]
      },
      "UsageStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UsageResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UsageHistoryEntry": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Usage record ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "periodStart": {
            "type": "string",
            "format": "date-time",
            "description": "Period start date",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "periodEnd": {
            "type": "string",
            "format": "date-time",
            "description": "Period end date",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "ticketsCreated": {
            "type": "integer",
            "description": "Tickets created in period"
          },
          "messagesCreated": {
            "type": "integer",
            "description": "Messages created in period"
          },
          "storageUsedMB": {
            "type": "number",
            "description": "Storage used in MB"
          },
          "apiRequestsCount": {
            "type": "integer",
            "description": "API requests made"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Record creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Record update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "organizationId",
          "periodStart",
          "periodEnd",
          "ticketsCreated",
          "messagesCreated",
          "storageUsedMB",
          "apiRequestsCount",
          "createdAt",
          "updatedAt"
        ]
      },
      "UsageHistoryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UsageHistoryEntry"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "LimitCheckResult": {
        "type": "object",
        "properties": {
          "allowed": {
            "type": "boolean",
            "description": "Whether the action is allowed"
          },
          "usageType": {
            "type": "string",
            "enum": [
              "tickets",
              "messages",
              "storage",
              "api"
            ],
            "description": "Type of usage metric",
            "example": "tickets"
          },
          "current": {
            "type": "integer",
            "description": "Current usage"
          },
          "limit": {
            "type": "integer",
            "description": "Maximum allowed"
          },
          "remaining": {
            "type": "integer",
            "description": "Remaining amount"
          },
          "percentUsed": {
            "type": "number",
            "description": "Percentage used"
          },
          "shouldAlert": {
            "type": "boolean",
            "description": "Whether alert threshold is exceeded"
          },
          "upgradeUrl": {
            "type": "string",
            "description": "URL to upgrade plan"
          }
        },
        "required": [
          "allowed",
          "usageType",
          "current",
          "limit",
          "remaining",
          "percentUsed",
          "shouldAlert"
        ]
      },
      "LimitCheckResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/LimitCheckResult"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ChangePlanResponse": {
        "type": "object",
        "properties": {
          "subscription": {
            "$ref": "#/components/schemas/Subscription"
          },
          "isUpgrade": {
            "type": "boolean",
            "description": "Whether this was an upgrade"
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        },
        "required": [
          "subscription",
          "isUpgrade",
          "message"
        ]
      },
      "ChangePlanSuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/ChangePlanResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ChangePlanRequest": {
        "type": "object",
        "properties": {
          "planId": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the plan to switch to",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": [
          "planId"
        ]
      },
      "CancelSubscriptionResponse": {
        "type": "object",
        "properties": {
          "subscription": {
            "$ref": "#/components/schemas/Subscription"
          },
          "message": {
            "type": "string",
            "description": "Cancellation message"
          }
        },
        "required": [
          "subscription",
          "message"
        ]
      },
      "CancelSubscriptionSuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/CancelSubscriptionResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CancelSubscriptionRequest": {
        "type": "object",
        "properties": {
          "immediately": {
            "type": "boolean",
            "description": "Cancel immediately vs at period end"
          }
        }
      },
      "ReactivateSubscriptionResponse": {
        "type": "object",
        "properties": {
          "subscription": {
            "$ref": "#/components/schemas/Subscription"
          },
          "message": {
            "type": "string",
            "description": "Reactivation message"
          }
        },
        "required": [
          "subscription",
          "message"
        ]
      },
      "ReactivateSubscriptionSuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/ReactivateSubscriptionResponse"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "JobInfo": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Job name identifier"
          },
          "schedule": {
            "type": "string",
            "description": "Cron schedule expression"
          },
          "lastRun": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Timestamp of last execution",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "nextRun": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Timestamp of next scheduled execution",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "running": {
            "type": "boolean",
            "description": "Whether the job is currently running"
          }
        },
        "required": [
          "name",
          "schedule",
          "lastRun",
          "nextRun",
          "running"
        ]
      },
      "JobStatus": {
        "type": "object",
        "properties": {
          "jobs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/JobInfo"
            },
            "description": "List of all scheduled jobs"
          },
          "uptime": {
            "type": "number",
            "description": "Scheduler uptime in milliseconds"
          }
        },
        "required": [
          "jobs",
          "uptime"
        ]
      },
      "JobStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/JobStatus"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "JobTriggerResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "SlaStats": {
        "type": "object",
        "properties": {
          "totalTickets": {
            "type": "integer",
            "description": "Total tickets with SLA"
          },
          "breachedCount": {
            "type": "integer",
            "description": "Number of tickets that breached SLA"
          },
          "atRiskCount": {
            "type": "integer",
            "description": "Number of tickets at risk of breaching"
          },
          "onTrackCount": {
            "type": "integer",
            "description": "Number of tickets on track"
          },
          "breachRate": {
            "type": "number",
            "description": "Percentage of tickets that breached SLA"
          },
          "averageResponseTime": {
            "type": "number",
            "nullable": true,
            "description": "Average first response time in minutes"
          },
          "averageResolutionTime": {
            "type": "number",
            "nullable": true,
            "description": "Average resolution time in minutes"
          }
        },
        "required": [
          "totalTickets",
          "breachedCount",
          "atRiskCount",
          "onTrackCount",
          "breachRate",
          "averageResponseTime",
          "averageResolutionTime"
        ]
      },
      "SlaStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SlaStats"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AutoCloseTicket": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Ticket ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "title": {
            "type": "string",
            "description": "Ticket title"
          },
          "status": {
            "type": "string",
            "description": "Current ticket status"
          },
          "lastActivityAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of last activity",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "daysSinceActivity": {
            "type": "number",
            "description": "Days since last activity"
          }
        },
        "required": [
          "id",
          "title",
          "status",
          "lastActivityAt",
          "daysSinceActivity"
        ]
      },
      "AutoClosePreview": {
        "type": "object",
        "properties": {
          "candidateCount": {
            "type": "integer",
            "description": "Number of tickets eligible for auto-close"
          },
          "tickets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AutoCloseTicket"
            },
            "description": "List of auto-close candidate tickets"
          },
          "settings": {
            "type": "object",
            "properties": {
              "daysInactive": {
                "type": "integer",
                "description": "Days of inactivity before auto-close"
              },
              "targetStatus": {
                "type": "string",
                "description": "Status to transition tickets to"
              }
            },
            "required": [
              "daysInactive",
              "targetStatus"
            ],
            "description": "Auto-close configuration"
          }
        },
        "required": [
          "candidateCount",
          "tickets",
          "settings"
        ]
      },
      "AutoClosePreviewResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/AutoClosePreview"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "MessageAuthor": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Author's user ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Author's display name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Author's email"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "Author's avatar URL"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin",
              "owner"
            ],
            "description": "Author's role"
          }
        },
        "required": [
          "id",
          "name",
          "email",
          "avatarUrl",
          "role"
        ],
        "description": "Message author"
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Message ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "ticketId": {
            "type": "string",
            "format": "uuid",
            "description": "Parent ticket ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "content": {
            "type": "string",
            "description": "Message content (HTML or plain text)"
          },
          "type": {
            "type": "string",
            "enum": [
              "reply",
              "internal_note",
              "system"
            ],
            "description": "Message type",
            "example": "reply"
          },
          "author": {
            "$ref": "#/components/schemas/MessageAuthor"
          },
          "attachments": {
            "type": "array",
            "items": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/Attachment"
                },
                {
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Attachment ID",
                      "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "filename": {
                      "type": "string",
                      "description": "Original filename"
                    },
                    "url": {
                      "type": "string",
                      "format": "uri",
                      "description": "Download URL"
                    },
                    "mimeType": {
                      "type": "string",
                      "description": "MIME type"
                    },
                    "size": {
                      "type": "number",
                      "minimum": 0,
                      "exclusiveMinimum": true,
                      "description": "File size in bytes"
                    }
                  },
                  "required": [
                    "id",
                    "filename",
                    "url",
                    "mimeType",
                    "size"
                  ]
                }
              ]
            },
            "description": "Attached files"
          },
          "isEdited": {
            "type": "boolean",
            "description": "Whether message was edited"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "ticketId",
          "content",
          "type",
          "author",
          "attachments",
          "isEdited",
          "createdAt",
          "updatedAt"
        ]
      },
      "MessageListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Message"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "MessageDetailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Message"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateMessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Message"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateMessageRequest": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50000,
            "description": "Message content (1-50000 characters)"
          },
          "type": {
            "type": "string",
            "enum": [
              "reply",
              "internal_note",
              "system"
            ],
            "default": "reply",
            "description": "Message type: reply (visible to customer), internal_note (staff only)",
            "example": "reply"
          },
          "attachments": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Attachment ID from upload"
                },
                "filename": {
                  "type": "string",
                  "description": "Original filename"
                },
                "url": {
                  "type": "string",
                  "format": "uri",
                  "description": "File URL"
                },
                "mimeType": {
                  "type": "string",
                  "description": "MIME type"
                },
                "size": {
                  "type": "number",
                  "minimum": 0,
                  "exclusiveMinimum": true,
                  "description": "File size in bytes"
                }
              },
              "required": [
                "id",
                "filename",
                "url",
                "mimeType",
                "size"
              ]
            },
            "maxItems": 10,
            "description": "Attachments to include (max 10)"
          }
        },
        "required": [
          "content"
        ]
      },
      "UpdateMessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Message"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateMessageRequest": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50000,
            "description": "Updated message content"
          }
        },
        "required": [
          "content"
        ]
      },
      "DeleteMessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "OrganizationSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Organization name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly slug"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether organization is active"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "OrganizationListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/OrganizationSummary"
                },
                {
                  "type": "object",
                  "properties": {
                    "role": {
                      "type": "string",
                      "enum": [
                        "customer",
                        "agent",
                        "admin",
                        "owner"
                      ],
                      "description": "User role determining access level",
                      "example": "agent"
                    }
                  },
                  "required": [
                    "role"
                  ]
                }
              ]
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "BrandingSettings": {
        "type": "object",
        "properties": {
          "primaryColor": {
            "type": "string",
            "pattern": "^#[0-9a-fA-F]{6}$",
            "description": "Primary brand color (hex)"
          },
          "logoUrl": {
            "type": "string",
            "format": "uri",
            "description": "Organization logo URL"
          }
        }
      },
      "NotificationSettings": {
        "type": "object",
        "properties": {
          "emailOnNewTicket": {
            "type": "boolean",
            "description": "Send email on new ticket"
          },
          "emailOnTicketUpdate": {
            "type": "boolean",
            "description": "Send email on ticket update"
          },
          "slackWebhookUrl": {
            "type": "string",
            "format": "uri",
            "description": "Slack webhook for notifications"
          }
        }
      },
      "FeatureSettings": {
        "type": "object",
        "properties": {
          "liveChatEnabled": {
            "type": "boolean",
            "description": "Enable live chat widget"
          },
          "customerPortalEnabled": {
            "type": "boolean",
            "description": "Enable customer self-service portal"
          }
        }
      },
      "OrganizationSettings": {
        "type": "object",
        "properties": {
          "branding": {
            "$ref": "#/components/schemas/BrandingSettings"
          },
          "notifications": {
            "$ref": "#/components/schemas/NotificationSettings"
          },
          "features": {
            "$ref": "#/components/schemas/FeatureSettings"
          }
        },
        "description": "Organization settings"
      },
      "OrganizationDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/OrganizationSummary"
          },
          {
            "type": "object",
            "properties": {
              "settings": {
                "$ref": "#/components/schemas/OrganizationSettings"
              },
              "userRole": {
                "type": "string",
                "enum": [
                  "customer",
                  "agent",
                  "admin",
                  "owner"
                ],
                "description": "Current user's role in this organization",
                "example": "agent"
              },
              "memberCount": {
                "type": "integer",
                "description": "Number of members"
              }
            },
            "required": [
              "userRole"
            ]
          }
        ]
      },
      "CreateOrganizationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/OrganizationDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateOrganizationRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "Organization name (2-100 characters)"
          },
          "slug": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$",
            "description": "URL-friendly slug (lowercase alphanumeric with hyphens)"
          }
        },
        "required": [
          "name",
          "slug"
        ]
      },
      "OrganizationDetailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/OrganizationDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateOrganizationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/OrganizationDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateOrganizationRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "New organization name"
          },
          "settings": {
            "allOf": [
              {
                "$ref": "#/components/schemas/OrganizationSettings"
              },
              {
                "description": "Updated settings"
              }
            ]
          }
        }
      },
      "Member": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Valid email address",
            "example": "user@example.com"
          },
          "name": {
            "type": "string",
            "description": "User's display name"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "Avatar URL"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin",
              "owner"
            ],
            "description": "Role in organization",
            "example": "agent"
          },
          "joinedAt": {
            "type": "string",
            "format": "date-time",
            "description": "When they joined",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether account is active"
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "avatarUrl",
          "role",
          "joinedAt",
          "isActive"
        ]
      },
      "MemberListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Member"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "Invitation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Invitation ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Invited email address",
            "example": "user@example.com"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin",
              "owner"
            ],
            "description": "Role to be assigned",
            "example": "agent"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "accepted",
              "expired",
              "cancelled"
            ],
            "description": "Invitation status"
          },
          "invitedBy": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid",
                "description": "Unique identifier (UUID v4)",
                "example": "550e8400-e29b-41d4-a716-446655440000"
              },
              "name": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Valid email address",
                "example": "user@example.com"
              }
            },
            "required": [
              "id",
              "name",
              "email"
            ],
            "description": "Who sent the invitation"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "When invitation was sent",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "When invitation expires",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "acceptedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "When invitation was accepted",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "email",
          "role",
          "status",
          "invitedBy",
          "createdAt",
          "expiresAt",
          "acceptedAt"
        ]
      },
      "InviteMemberResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Invitation"
          },
          "message": {
            "type": "string",
            "default": "Invitation sent"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "InviteMemberRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address to invite",
            "example": "user@example.com"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin"
            ],
            "default": "customer",
            "description": "Role to assign"
          }
        },
        "required": [
          "email"
        ]
      },
      "UpdateMemberRoleResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Member"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateMemberRoleRequest": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin"
            ],
            "description": "New role to assign"
          }
        },
        "required": [
          "role"
        ]
      },
      "RemoveMemberResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "InvitationListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Invitation"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "CancelInvitationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "ResendInvitationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string",
            "default": "Invitation resent"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "New expiration date",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "success",
          "expiresAt"
        ]
      },
      "InvitationPreviewResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "organization": {
                "$ref": "#/components/schemas/OrganizationSummary"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Valid email address",
                "example": "user@example.com"
              },
              "role": {
                "type": "string",
                "enum": [
                  "customer",
                  "agent",
                  "admin",
                  "owner"
                ],
                "description": "User role determining access level",
                "example": "agent"
              },
              "expiresAt": {
                "type": "string",
                "format": "date-time",
                "description": "ISO 8601 timestamp",
                "example": "2024-01-15T10:30:00.000Z"
              }
            },
            "required": [
              "organization",
              "email",
              "role",
              "expiresAt"
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AcceptInvitationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string",
            "default": "Invitation accepted"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier (UUID v4)",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin",
              "owner"
            ],
            "description": "User role determining access level",
            "example": "agent"
          }
        },
        "required": [
          "success",
          "organizationId",
          "role"
        ]
      },
      "AcceptInvitationRequest": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "Invitation token from email"
          }
        },
        "required": [
          "token"
        ]
      },
      "DeactivateOrganizationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/OrganizationSummary"
          },
          "message": {
            "type": "string",
            "default": "Organization deactivated"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ReactivateOrganizationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/OrganizationSummary"
          },
          "message": {
            "type": "string",
            "default": "Organization reactivated"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "DateRange": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "enum": [
              "createdAt",
              "updatedAt",
              "resolvedAt",
              "closedAt"
            ],
            "description": "Date field to filter by"
          },
          "from": {
            "type": "string",
            "format": "date-time",
            "description": "Start date (ISO 8601)"
          },
          "to": {
            "type": "string",
            "format": "date-time",
            "description": "End date (ISO 8601)"
          }
        },
        "required": [
          "field"
        ],
        "description": "Date range filter"
      },
      "FilterCriteria": {
        "type": "object",
        "properties": {
          "status": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "open",
                "pending",
                "resolved",
                "closed"
              ],
              "description": "Current status of the ticket",
              "example": "open"
            },
            "description": "Filter by ticket statuses"
          },
          "priority": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Priority level affecting SLA targets",
              "example": "medium"
            },
            "description": "Filter by priority levels"
          },
          "assigneeId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "Filter by assignee (null for unassigned)",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "customerId": {
            "type": "string",
            "format": "uuid",
            "description": "Filter by customer ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Filter by tag names"
          },
          "categoryId": {
            "type": "string",
            "format": "uuid",
            "description": "Filter by category ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "search": {
            "type": "string",
            "description": "Text search in title/description"
          },
          "dateRange": {
            "$ref": "#/components/schemas/DateRange"
          }
        },
        "description": "Filter criteria"
      },
      "SortBy": {
        "type": "string",
        "enum": [
          "createdAt",
          "updatedAt",
          "priority",
          "status"
        ],
        "description": "Field to sort results by"
      },
      "SortOrder": {
        "type": "string",
        "enum": [
          "asc",
          "desc"
        ],
        "description": "Sort order (ascending or descending)"
      },
      "SavedFilter": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Filter ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Filter name"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "description": "Filter description"
          },
          "criteria": {
            "$ref": "#/components/schemas/FilterCriteria"
          },
          "isDefault": {
            "type": "boolean",
            "description": "Whether this is the user's default filter"
          },
          "isShared": {
            "type": "boolean",
            "description": "Whether this filter is shared with organization"
          },
          "sortBy": {
            "$ref": "#/components/schemas/SortBy"
          },
          "sortOrder": {
            "$ref": "#/components/schemas/SortOrder"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "description": "Filter color (hex format #RRGGBB)"
          },
          "icon": {
            "type": "string",
            "nullable": true,
            "description": "Filter icon identifier"
          },
          "position": {
            "type": "integer",
            "description": "Display order position"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "userId": {
            "type": "string",
            "format": "uuid",
            "description": "Owner user ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "criteria",
          "isDefault",
          "isShared",
          "sortBy",
          "sortOrder",
          "color",
          "icon",
          "position",
          "organizationId",
          "userId",
          "createdAt",
          "updatedAt"
        ]
      },
      "SavedFilterListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SavedFilter"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "DefaultSavedFilterResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SavedFilter"
              },
              {
                "nullable": true
              }
            ]
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SavedFilterResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SavedFilter"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SavedFilterCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SavedFilter"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateSavedFilterRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Filter name (1-100 characters)"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "Filter description (up to 500 characters)"
          },
          "criteria": {
            "$ref": "#/components/schemas/FilterCriteria"
          },
          "isDefault": {
            "type": "boolean",
            "default": false,
            "description": "Set as default filter"
          },
          "isShared": {
            "type": "boolean",
            "default": false,
            "description": "Share with organization"
          },
          "sortBy": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SortBy"
              },
              {
                "default": "createdAt",
                "description": "Sort field"
              }
            ]
          },
          "sortOrder": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SortOrder"
              },
              {
                "default": "desc",
                "description": "Sort order"
              }
            ]
          },
          "color": {
            "type": "string",
            "pattern": "^#[0-9A-Fa-f]{6}$",
            "description": "Filter color in hex format"
          },
          "icon": {
            "type": "string",
            "maxLength": 50,
            "description": "Icon identifier"
          }
        },
        "required": [
          "name",
          "criteria"
        ]
      },
      "ReorderedFiltersResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SavedFilter"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ReorderFiltersRequest": {
        "type": "object",
        "properties": {
          "filterIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid",
              "description": "Unique identifier (UUID v4)",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "minItems": 1,
            "description": "Ordered list of filter IDs defining new positions"
          }
        },
        "required": [
          "filterIds"
        ]
      },
      "DuplicatedFilterResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SavedFilter"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdatedFilterResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SavedFilter"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateSavedFilterRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "New filter name"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "maxLength": 500,
            "description": "New description"
          },
          "criteria": {
            "allOf": [
              {
                "$ref": "#/components/schemas/FilterCriteria"
              },
              {
                "description": "New filter criteria"
              }
            ]
          },
          "isDefault": {
            "type": "boolean",
            "description": "Set as default filter"
          },
          "isShared": {
            "type": "boolean",
            "description": "Share with organization"
          },
          "sortBy": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SortBy"
              },
              {
                "description": "New sort field"
              }
            ]
          },
          "sortOrder": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SortOrder"
              },
              {
                "description": "New sort order"
              }
            ]
          },
          "color": {
            "type": "string",
            "nullable": true,
            "pattern": "^#[0-9A-Fa-f]{6}$",
            "description": "New color or null to remove"
          },
          "icon": {
            "type": "string",
            "nullable": true,
            "maxLength": 50,
            "description": "New icon or null to remove"
          },
          "position": {
            "type": "integer",
            "minimum": 0,
            "description": "New position"
          }
        }
      },
      "SlaPolicy": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "SLA Policy ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Policy name"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "description": "Priority level this policy applies to",
            "example": "medium"
          },
          "firstResponseTime": {
            "type": "integer",
            "description": "Target first response time in minutes"
          },
          "resolutionTime": {
            "type": "integer",
            "description": "Target resolution time in minutes"
          },
          "businessHoursOnly": {
            "type": "boolean",
            "description": "Whether SLA times only count during business hours"
          },
          "isDefault": {
            "type": "boolean",
            "description": "Whether this is a default policy"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "priority",
          "firstResponseTime",
          "resolutionTime",
          "businessHoursOnly",
          "isDefault",
          "organizationId",
          "createdAt",
          "updatedAt"
        ]
      },
      "SlaPolicyListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SlaPolicy"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SlaPolicyResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SlaPolicy"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "SlaPolicyCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SlaPolicy"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateSlaPolicyRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Policy name (1-100 characters)"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "description": "Priority level this policy applies to",
            "example": "medium"
          },
          "firstResponseTime": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10080,
            "description": "Target first response time in minutes (1 min to 7 days)"
          },
          "resolutionTime": {
            "type": "integer",
            "minimum": 1,
            "maximum": 43200,
            "description": "Target resolution time in minutes (1 min to 30 days)"
          },
          "businessHoursOnly": {
            "type": "boolean",
            "default": true,
            "description": "Whether SLA times only count during business hours"
          },
          "isDefault": {
            "type": "boolean",
            "default": false,
            "description": "Whether this is a default policy"
          }
        },
        "required": [
          "name",
          "priority",
          "firstResponseTime",
          "resolutionTime"
        ]
      },
      "SlaPolicyUpdatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/SlaPolicy"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateSlaPolicyRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Policy name (1-100 characters)"
          },
          "firstResponseTime": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10080,
            "description": "Target first response time in minutes (1 min to 7 days)"
          },
          "resolutionTime": {
            "type": "integer",
            "minimum": 1,
            "maximum": 43200,
            "description": "Target resolution time in minutes (1 min to 30 days)"
          },
          "businessHoursOnly": {
            "type": "boolean",
            "description": "Whether SLA times only count during business hours"
          },
          "isDefault": {
            "type": "boolean",
            "description": "Whether this is a default policy"
          }
        }
      },
      "SlaPoliciesInitializedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SlaPolicy"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "Tag": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Tag ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Tag name (lowercase)"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "description": "Tag color (hex format #RRGGBB)"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "color",
          "organizationId",
          "createdAt"
        ]
      },
      "TagListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Tag"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "PopularTag": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Tag ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Tag name"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "description": "Tag color"
          },
          "usageCount": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of tickets using this tag"
          }
        },
        "required": [
          "id",
          "name",
          "color",
          "usageCount"
        ]
      },
      "PopularTagsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PopularTag"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AutocompleteTag": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Tag ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Tag name"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "description": "Tag color"
          }
        },
        "required": [
          "id",
          "name",
          "color"
        ]
      },
      "AutocompleteTagsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AutocompleteTag"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "TagStats": {
        "type": "object",
        "properties": {
          "totalTags": {
            "type": "integer",
            "minimum": 0,
            "description": "Total number of tags"
          },
          "usedTags": {
            "type": "integer",
            "minimum": 0,
            "description": "Tags with at least one ticket"
          },
          "unusedTags": {
            "type": "integer",
            "minimum": 0,
            "description": "Tags with no tickets"
          },
          "topTags": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PopularTag"
            },
            "description": "Most used tags"
          }
        },
        "required": [
          "totalTags",
          "usedTags",
          "unusedTags",
          "topTags"
        ]
      },
      "TagStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TagStats"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "TagResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Tag"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "TagCreatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Tag"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateTagRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "description": "Tag name (1-50 characters, will be converted to lowercase)"
          },
          "color": {
            "type": "string",
            "pattern": "^#[0-9A-Fa-f]{6}$",
            "description": "Color in hex format (#RRGGBB)"
          }
        },
        "required": [
          "name"
        ]
      },
      "TagUpdatedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Tag"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateTagRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "description": "New tag name (will be converted to lowercase)"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "pattern": "^#[0-9A-Fa-f]{6}$",
            "description": "New color or null to remove"
          }
        }
      },
      "TagDeletedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "UserRef": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "User's display name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "Avatar URL"
          }
        },
        "required": [
          "id",
          "name",
          "email",
          "avatarUrl"
        ],
        "description": "Customer who created the ticket"
      },
      "CategoryRef": {
        "type": "object",
        "nullable": true,
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Category ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Category name"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "description": "Ticket category"
      },
      "TagRef": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Tag ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Tag name"
          },
          "color": {
            "type": "string",
            "nullable": true,
            "description": "Tag color (hex)"
          }
        },
        "required": [
          "id",
          "name",
          "color"
        ]
      },
      "TicketSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Ticket ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "number": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "description": "Human-readable ticket number"
          },
          "title": {
            "type": "string",
            "description": "Ticket title"
          },
          "status": {
            "type": "string",
            "enum": [
              "open",
              "pending",
              "resolved",
              "closed"
            ],
            "description": "Current status of the ticket",
            "example": "open"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "description": "Priority level affecting SLA targets",
            "example": "medium"
          },
          "channel": {
            "type": "string",
            "enum": [
              "web",
              "email",
              "api",
              "chat"
            ],
            "description": "Channel through which the ticket was created",
            "example": "web"
          },
          "customer": {
            "$ref": "#/components/schemas/UserRef"
          },
          "assignee": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UserRef"
              },
              {
                "nullable": true,
                "description": "Assigned agent"
              }
            ]
          },
          "category": {
            "$ref": "#/components/schemas/CategoryRef"
          },
          "tags": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TagRef"
            },
            "description": "Associated tags"
          },
          "messageCount": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of messages"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "resolvedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Resolution timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "closedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Close timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "number",
          "title",
          "status",
          "priority",
          "channel",
          "customer",
          "assignee",
          "category",
          "tags",
          "messageCount",
          "createdAt",
          "updatedAt",
          "resolvedAt",
          "closedAt"
        ]
      },
      "TicketListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TicketSummary"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "TicketStats": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total tickets"
          },
          "open": {
            "type": "integer",
            "description": "Open tickets"
          },
          "pending": {
            "type": "integer",
            "description": "Pending tickets"
          },
          "resolved": {
            "type": "integer",
            "description": "Resolved tickets"
          },
          "closed": {
            "type": "integer",
            "description": "Closed tickets"
          },
          "unassigned": {
            "type": "integer",
            "description": "Unassigned tickets"
          },
          "avgResolutionTime": {
            "type": "number",
            "nullable": true,
            "description": "Average resolution time in hours"
          },
          "avgFirstResponseTime": {
            "type": "number",
            "nullable": true,
            "description": "Average first response time in hours"
          }
        },
        "required": [
          "total",
          "open",
          "pending",
          "resolved",
          "closed",
          "unassigned",
          "avgResolutionTime",
          "avgFirstResponseTime"
        ]
      },
      "TicketStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketStats"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "TicketDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/TicketSummary"
          },
          {
            "type": "object",
            "properties": {
              "description": {
                "type": "string",
                "description": "Full ticket description"
              },
              "organizationId": {
                "type": "string",
                "format": "uuid",
                "description": "Organization ID",
                "example": "550e8400-e29b-41d4-a716-446655440000"
              },
              "firstResponseAt": {
                "type": "string",
                "nullable": true,
                "format": "date-time",
                "description": "First agent response timestamp",
                "example": "2024-01-15T10:30:00.000Z"
              },
              "slaBreachAt": {
                "type": "string",
                "nullable": true,
                "format": "date-time",
                "description": "SLA breach deadline",
                "example": "2024-01-15T10:30:00.000Z"
              },
              "metadata": {
                "type": "object",
                "additionalProperties": {
                  "nullable": true
                },
                "description": "Custom metadata"
              }
            },
            "required": [
              "description",
              "organizationId",
              "firstResponseAt",
              "slaBreachAt"
            ]
          }
        ]
      },
      "TicketDetailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "Activity": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Activity ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "type": {
            "type": "string",
            "enum": [
              "created",
              "updated",
              "assigned",
              "unassigned",
              "status_changed",
              "priority_changed",
              "commented",
              "merged",
              "tagged",
              "untagged"
            ],
            "description": "Activity type"
          },
          "actor": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UserRef"
              },
              {
                "description": "User who performed the action"
              }
            ]
          },
          "changes": {
            "type": "object",
            "additionalProperties": {
              "nullable": true
            },
            "description": "What changed"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the activity occurred",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "type",
          "actor",
          "createdAt"
        ]
      },
      "TicketActivitiesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Activity"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "CreateTicketResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CreateTicketRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 255,
            "description": "Ticket title (5-255 characters)"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 10000,
            "description": "Ticket description (10-10000 characters)"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "default": "medium",
            "description": "Priority level",
            "example": "medium"
          },
          "channel": {
            "type": "string",
            "enum": [
              "web",
              "email",
              "api",
              "chat"
            ],
            "default": "web",
            "description": "Creation channel",
            "example": "web"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 10,
            "description": "Tag names to attach (max 10)"
          },
          "categoryId": {
            "type": "string",
            "format": "uuid",
            "description": "Category ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": [
          "title",
          "description"
        ]
      },
      "UpdateTicketResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateTicketRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 255,
            "description": "New title"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 10000,
            "description": "New description"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "description": "New priority",
            "example": "medium"
          },
          "status": {
            "type": "string",
            "enum": [
              "open",
              "pending",
              "resolved",
              "closed"
            ],
            "description": "New status",
            "example": "open"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 10,
            "description": "Replace all tags"
          },
          "categoryId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "New category ID or null to remove",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        }
      },
      "AssignTicketResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AssignTicketRequest": {
        "type": "object",
        "properties": {
          "assigneeId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "Agent ID to assign, or null to unassign",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": [
          "assigneeId"
        ]
      },
      "CloseTicketResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CloseTicketRequest": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "maxLength": 500,
            "description": "Reason for closing"
          }
        }
      },
      "ReopenTicketResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "BulkResult": {
        "type": "object",
        "properties": {
          "success": {
            "type": "integer",
            "description": "Number of successful operations"
          },
          "failed": {
            "type": "integer",
            "description": "Number of failed operations"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "ticketId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique identifier (UUID v4)",
                  "example": "550e8400-e29b-41d4-a716-446655440000"
                },
                "error": {
                  "type": "string"
                }
              },
              "required": [
                "ticketId",
                "error"
              ]
            },
            "description": "Details of failures"
          }
        },
        "required": [
          "success",
          "failed"
        ]
      },
      "BulkUpdateResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/BulkResult"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "BulkUpdateRequest": {
        "type": "object",
        "properties": {
          "ticketIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid",
              "description": "Unique identifier (UUID v4)",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "minItems": 1,
            "maxItems": 100,
            "description": "Ticket IDs to update (max 100)"
          },
          "updates": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "enum": [
                  "open",
                  "pending",
                  "resolved",
                  "closed"
                ],
                "description": "Current status of the ticket",
                "example": "open"
              },
              "priority": {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high",
                  "urgent"
                ],
                "description": "Priority level affecting SLA targets",
                "example": "medium"
              },
              "assigneeId": {
                "type": "string",
                "nullable": true,
                "format": "uuid",
                "description": "Unique identifier (UUID v4)",
                "example": "550e8400-e29b-41d4-a716-446655440000"
              },
              "categoryId": {
                "type": "string",
                "nullable": true,
                "format": "uuid",
                "description": "Unique identifier (UUID v4)",
                "example": "550e8400-e29b-41d4-a716-446655440000"
              },
              "addTags": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "maxItems": 10,
                "description": "Tags to add"
              },
              "removeTags": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "maxItems": 10,
                "description": "Tags to remove"
              }
            }
          }
        },
        "required": [
          "ticketIds",
          "updates"
        ]
      },
      "BulkAssignResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/BulkResult"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "BulkAssignRequest": {
        "type": "object",
        "properties": {
          "ticketIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid",
              "description": "Unique identifier (UUID v4)",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "minItems": 1,
            "maxItems": 100,
            "description": "Ticket IDs to assign"
          },
          "assigneeId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "description": "Agent ID or null to unassign",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": [
          "ticketIds",
          "assigneeId"
        ]
      },
      "BulkDeleteResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/BulkResult"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "BulkDeleteRequest": {
        "type": "object",
        "properties": {
          "ticketIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid",
              "description": "Unique identifier (UUID v4)",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "minItems": 1,
            "maxItems": 100,
            "description": "Ticket IDs to delete"
          },
          "permanent": {
            "type": "boolean",
            "default": false,
            "description": "true for permanent delete, false for soft close"
          }
        },
        "required": [
          "ticketIds"
        ]
      },
      "MergeTicketsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/TicketDetail"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "MergeTicketsRequest": {
        "type": "object",
        "properties": {
          "primaryTicketId": {
            "type": "string",
            "format": "uuid",
            "description": "Ticket to merge into (survives)",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "secondaryTicketIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid",
              "description": "Unique identifier (UUID v4)",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "minItems": 1,
            "maxItems": 10,
            "description": "Tickets to merge from (closed)"
          },
          "mergeComments": {
            "type": "boolean",
            "default": true,
            "description": "Copy comments to primary ticket"
          }
        },
        "required": [
          "primaryTicketId",
          "secondaryTicketIds"
        ]
      },
      "UserSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User's unique identifier",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Valid email address",
            "example": "user@example.com"
          },
          "name": {
            "type": "string",
            "description": "User's display name"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "URL to user's avatar image"
          },
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin",
              "owner"
            ],
            "description": "User's role in the organization",
            "example": "agent"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the account is active"
          },
          "emailVerified": {
            "type": "boolean",
            "description": "Whether email has been verified"
          },
          "lastLoginAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time",
            "description": "Last successful login timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "avatarUrl",
          "role",
          "isActive",
          "emailVerified",
          "lastLoginAt",
          "createdAt"
        ]
      },
      "UserWithRole": {
        "allOf": [
          {
            "$ref": "#/components/schemas/UserSummary"
          },
          {
            "type": "object",
            "properties": {
              "joinedAt": {
                "type": "string",
                "format": "date-time",
                "description": "When the user joined the organization",
                "example": "2024-01-15T10:30:00.000Z"
              }
            },
            "required": [
              "joinedAt"
            ]
          }
        ]
      },
      "UserListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserWithRole"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          }
        },
        "required": [
          "success",
          "data",
          "pagination"
        ]
      },
      "Agent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Agent's unique identifier",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Agent's display name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Valid email address",
            "example": "user@example.com"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "URL to agent's avatar image"
          },
          "role": {
            "type": "string",
            "enum": [
              "agent",
              "admin",
              "owner"
            ],
            "description": "Agent's role"
          }
        },
        "required": [
          "id",
          "name",
          "email",
          "avatarUrl",
          "role"
        ]
      },
      "AgentListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Agent"
            }
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UserProfile": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User's unique identifier",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Valid email address",
            "example": "user@example.com"
          },
          "name": {
            "type": "string",
            "description": "User's display name"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "URL to user's avatar image"
          },
          "emailVerified": {
            "type": "boolean",
            "description": "Whether email has been verified"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the account is active"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "avatarUrl",
          "emailVerified",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CurrentProfileResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UserProfile"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateProfileResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UserProfile"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateProfileRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "New display name (2-100 characters)"
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true,
            "format": "uri",
            "description": "New avatar URL or null to remove"
          }
        }
      },
      "UserDetailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UserWithRole"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateRoleResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UserWithRole"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "UpdateUserRoleRequest": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "admin"
            ],
            "description": "New role to assign"
          }
        },
        "required": [
          "role"
        ]
      },
      "DeactivateUserResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UserWithRole"
          },
          "message": {
            "type": "string",
            "default": "User deactivated successfully"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ReactivateUserResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "$ref": "#/components/schemas/UserWithRole"
          },
          "message": {
            "type": "string",
            "default": "User reactivated successfully"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "RemoveUserResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      }
    },
    "parameters": {
      "OrganizationId": {
        "schema": {
          "$ref": "#/components/schemas/OrganizationId"
        },
        "required": true,
        "name": "organizationId",
        "in": "path",
        "description": "Unique identifier of the organization"
      },
      "UserId": {
        "schema": {
          "$ref": "#/components/schemas/UserId"
        },
        "required": true,
        "name": "userId",
        "in": "path",
        "description": "Unique identifier of the user"
      },
      "TicketId": {
        "schema": {
          "$ref": "#/components/schemas/TicketId"
        },
        "required": true,
        "name": "ticketId",
        "in": "path",
        "description": "Unique identifier of the ticket"
      },
      "MessageId": {
        "schema": {
          "$ref": "#/components/schemas/MessageId"
        },
        "required": true,
        "name": "messageId",
        "in": "path",
        "description": "Unique identifier of the message"
      }
    }
  },
  "paths": {
    "/api/attachments/upload": {
      "post": {
        "tags": [
          "Attachments"
        ],
        "summary": "Upload a file",
        "description": "\nUpload a file attachment to the system.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can upload files\n\n**File Restrictions:**\n- Maximum file size: 10MB (configurable)\n- Allowed file types: images, documents, archives\n- Files are validated for type and size before storage\n\n**Storage:**\nFiles are stored with UUID-based filenames to prevent conflicts.\nOriginal filenames are preserved in metadata.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UploadAttachmentRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "File uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachmentUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/attachments": {
      "get": {
        "tags": [
          "Attachments"
        ],
        "summary": "List attachments",
        "description": "\nRetrieve a paginated list of attachments for the organization.\n\n**Access Control:**\n- Requires authentication\n- Returns only attachments within the user's organization\n\n**Filtering:**\n- Use `ticketId` to filter attachments by ticket\n- Use pagination parameters to control result size\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by ticket ID",
            "name": "ticketId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1,
              "description": "Page number for pagination"
            },
            "required": false,
            "description": "Page number for pagination",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "maximum": 100,
              "default": 20,
              "description": "Number of items per page (1-100)"
            },
            "required": false,
            "description": "Number of items per page (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of attachments",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachmentListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/attachments/{id}": {
      "get": {
        "tags": [
          "Attachments"
        ],
        "summary": "Get attachment metadata",
        "description": "\nRetrieve metadata for a specific attachment.\n\n**Access Control:**\n- Requires authentication\n- Returns only attachments within the user's organization\n\n**Response:**\nReturns attachment metadata including file info, URLs, and associations.\nDoes not return the actual file content (use download endpoint for that).\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Attachment ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Attachment ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Attachment metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachmentResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Attachments"
        ],
        "summary": "Delete attachment",
        "description": "\nDelete an attachment from the system.\n\n**Access Control:**\n- Requires admin or agent role\n- Customers cannot delete attachments\n\n**Behavior:**\n- Removes the file from storage\n- Deletes the attachment record from the database\n- This action cannot be undone\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Attachment ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Attachment ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Attachment deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttachmentDeletedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/attachments/{id}/download": {
      "get": {
        "tags": [
          "Attachments"
        ],
        "summary": "Download attachment file",
        "description": "\nDownload the actual file content of an attachment.\n\n**Access Control:**\n- Requires authentication\n- Returns only attachments within the user's organization\n\n**Response:**\nReturns the raw file with appropriate Content-Type and Content-Disposition headers.\nThe response is a binary file stream, not JSON.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Attachment ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Attachment ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "File content",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "nullable": true,
                  "description": "Binary file content"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/attachments/ticket/{ticketId}": {
      "get": {
        "tags": [
          "Attachments"
        ],
        "summary": "Get ticket attachments",
        "description": "\nRetrieve all attachments associated with a specific ticket.\n\n**Access Control:**\n- Requires authentication\n- Returns only attachments within the user's organization\n\n**Usage:**\nUse this endpoint to get all files attached to a ticket in one request,\nincluding attachments from messages and comments.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "ticketId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of ticket attachments",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketAttachmentsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit": {
      "get": {
        "tags": [
          "Audit"
        ],
        "summary": "List audit logs",
        "description": "\nRetrieve a paginated list of audit logs for the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Filtering:**\n- Filter by action type, user, resource, or date range\n- Search across multiple dimensions\n\n**Tracked Actions:**\n- Authentication events (login, logout, password changes)\n- Organization changes (create, update, delete)\n- Subscription events (upgrade, downgrade, cancel)\n- User management (invite, remove, role changes)\n- Security events (API key creation/revocation)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "Page number"
            },
            "required": false,
            "description": "Page number",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "description": "Items per page"
            },
            "required": false,
            "description": "Items per page",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/AuditAction"
                },
                {
                  "description": "Filter by action type"
                }
              ]
            },
            "required": false,
            "description": "Filter by action type",
            "name": "action",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by user ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by user ID",
            "name": "userId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by resource type"
            },
            "required": false,
            "description": "Filter by resource type",
            "name": "resourceType",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by resource ID"
            },
            "required": false,
            "description": "Filter by resource ID",
            "name": "resourceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Start date (ISO 8601)"
            },
            "required": false,
            "description": "Start date (ISO 8601)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "End date (ISO 8601)"
            },
            "required": false,
            "description": "End date (ISO 8601)",
            "name": "to",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "action",
                "userId"
              ],
              "default": "createdAt",
              "description": "Sort field"
            },
            "required": false,
            "description": "Sort field",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of audit logs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditLogListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit/export": {
      "get": {
        "tags": [
          "Audit"
        ],
        "summary": "Export audit logs",
        "description": "\nExport audit logs for compliance or analysis.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Export Formats:**\n- `json`: Full JSON data with all fields\n- `csv`: Spreadsheet-compatible format\n\n**Notes:**\n- Exports are subject to rate limiting\n- Large exports may take time to generate\n- This action is itself logged in the audit trail\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "json",
                "csv"
              ],
              "default": "json",
              "description": "Export format"
            },
            "required": false,
            "description": "Export format",
            "name": "format",
            "in": "query"
          },
          {
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/AuditAction"
                },
                {
                  "description": "Filter by action type"
                }
              ]
            },
            "required": false,
            "description": "Filter by action type",
            "name": "action",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by user ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by user ID",
            "name": "userId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Start date (ISO 8601)"
            },
            "required": false,
            "description": "Start date (ISO 8601)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "End date (ISO 8601)"
            },
            "required": false,
            "description": "End date (ISO 8601)",
            "name": "to",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Exported audit logs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExportAuditLogsJsonResponse"
                }
              },
              "text/csv": {
                "schema": {
                  "type": "string",
                  "description": "CSV formatted audit logs"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audit/{id}": {
      "get": {
        "tags": [
          "Audit"
        ],
        "summary": "Get audit log details",
        "description": "\nRetrieve detailed information about a specific audit log entry.\n\n**Access Control:**\n- Requires admin or owner role\n- Log must belong to the current organization\n\n**Use Cases:**\n- Investigating specific events\n- Compliance auditing\n- Security incident analysis\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Audit log ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Audit log ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Audit log details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditLogDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/sign-up": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Create a new user account",
        "description": "\nRegister a new user account with email and password.\n\n**Notes:**\n- A verification email will be sent to the provided address\n- The user must verify their email before full access is granted\n- Passwords must be 8-128 characters\n- Email addresses must be unique across the system\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignUpRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account created successfully. Check email for verification link.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignUpResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Email address already registered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Email already in use"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/sign-in": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Sign in to an existing account",
        "description": "\nAuthenticate with email and password credentials.\n\n**Notes:**\n- On success, a session cookie is set automatically\n- The cookie is HTTP-only and secure in production\n- Use `rememberMe: true` for extended session duration\n- Include the cookie in subsequent requests for authentication\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignInRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated. Session cookie set.",
            "headers": {
              "Set-Cookie": {
                "description": "Session cookie for authenticated requests",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignInResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid email or password",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Invalid credentials"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/sign-out": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Sign out of the current session",
        "description": "\nEnd the current authenticated session.\n\n**Notes:**\n- The session cookie will be invalidated\n- The user will need to sign in again to access protected resources\n- This action cannot be undone\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully signed out. Session cookie cleared.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignOutResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/session": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get current session information",
        "description": "\nRetrieve the current user's session data.\n\n**Notes:**\n- Returns the authenticated user and session details\n- Returns null/empty if no active session\n- Useful for checking authentication status on page load\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Session data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Request password reset email",
        "description": "\nSend a password reset link to the specified email address.\n\n**Notes:**\n- An email will be sent if the account exists\n- For security, the response is the same whether the email exists or not\n- Reset tokens expire after 1 hour\n- Rate limited to prevent abuse\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset email sent if account exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForgotPasswordResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Reset password with token",
        "description": "\nSet a new password using the reset token from the email link.\n\n**Notes:**\n- The token is single-use and expires after 1 hour\n- New password must meet security requirements (8-128 characters)\n- After successful reset, user can sign in with the new password\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResetPasswordResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid or expired token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Invalid or expired reset token"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/verify-email": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Verify email address",
        "description": "\nConfirm the user's email address using the verification token.\n\n**Notes:**\n- Token is sent via email during sign-up\n- Verification tokens expire after 24 hours\n- After verification, user gains full access to the system\n- User is automatically signed in after successful verification\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyEmailRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email verified successfully. User is now signed in.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VerifyEmailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid or expired verification token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Invalid or expired verification token"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get current user with organizations",
        "description": "\nRetrieve the authenticated user's profile including all organization memberships.\n\n**Notes:**\n- Requires authentication\n- Returns detailed information about each organization membership\n- Includes the user's role in each organization\n- Useful for building navigation and organization switchers\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Current user data with organization memberships",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register-with-org": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Register user with new organization",
        "description": "\nCreate a new user account and optionally a new organization in one step.\n\n**Notes:**\n- Combines user registration with organization creation\n- User becomes the owner of the newly created organization\n- If no organization name is provided, only the user account is created\n- A verification email will be sent to the provided address\n- Rate limited to prevent abuse\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterWithOrgRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User and organization created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterWithOrgResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Email address already registered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Email already in use"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/canned-responses": {
      "get": {
        "tags": [
          "Canned Responses"
        ],
        "summary": "List canned responses",
        "description": "\nRetrieve all canned responses for the current organization with pagination.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Filtering:**\n- Use `category` to filter responses by category\n- Use `search` to search in title and content (case-insensitive partial match)\n\n**Pagination:**\n- Use `page` and `limit` for pagination (default: page 1, limit 50)\n- Response includes total count and total pages for navigation\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "Page number (starting from 1)"
            },
            "required": false,
            "description": "Page number (starting from 1)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "description": "Number of results per page (1-100)"
            },
            "required": false,
            "description": "Number of results per page (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "maxLength": 100,
              "description": "Filter by category"
            },
            "required": false,
            "description": "Filter by category",
            "name": "category",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "maxLength": 200,
              "description": "Search in title and content"
            },
            "required": false,
            "description": "Search in title and content",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of canned responses",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CannedResponseListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Canned Responses"
        ],
        "summary": "Create canned response",
        "description": "\nCreate a new canned response for the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Validation:**\n- Title is required (1-200 characters)\n- Content is required (1-10,000 characters)\n- Shortcut is optional (max 50 characters)\n- Category is optional (max 100 characters)\n\n**Usage:**\nCanned responses can be used to quickly insert pre-written replies when responding to tickets.\nThe optional shortcut allows agents to quickly find and insert responses.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCannedResponseRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Canned response created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CannedResponseCreatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/canned-responses/categories": {
      "get": {
        "tags": [
          "Canned Responses"
        ],
        "summary": "List canned response categories",
        "description": "\nRetrieve all unique categories used by canned responses in the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Response:**\nReturns a list of categories with the count of responses in each category.\nUseful for building category filters in the UI.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of categories with response counts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoriesResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/canned-responses/{id}": {
      "get": {
        "tags": [
          "Canned Responses"
        ],
        "summary": "Get canned response by ID",
        "description": "\nRetrieve a single canned response by its ID.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Response:**\nReturns the complete canned response including title, content, shortcut, and category.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Canned Response ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Canned Response ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Canned response details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CannedResponseResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Canned Responses"
        ],
        "summary": "Update canned response",
        "description": "\nUpdate an existing canned response.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Updatable Fields:**\n- `title`: Response title\n- `content`: Response content/template text\n- `shortcut`: Quick insertion shortcut (set to null to remove)\n- `category`: Category for organization (set to null to remove)\n\n**Note:**\nAll fields are optional. Only provided fields will be updated.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Canned Response ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Canned Response ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCannedResponseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Canned response updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CannedResponseUpdatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Canned Responses"
        ],
        "summary": "Delete canned response",
        "description": "\nDelete a canned response from the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Note:**\nThis action is permanent and cannot be undone.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Canned Response ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Canned Response ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "204": {
            "description": "Canned response deleted successfully (no content)"
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories": {
      "get": {
        "tags": [
          "Categories"
        ],
        "summary": "List categories",
        "description": "\nRetrieve all categories for the current organization.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can view categories\n\n**Filtering:**\n- Use `includeInactive=true` to include deactivated categories\n- Use `parentId` to filter by parent category (or null for root categories)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Set to 'true' to include inactive categories"
            },
            "required": false,
            "description": "Set to 'true' to include inactive categories",
            "name": "includeInactive",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "nullable": true,
              "format": "uuid",
              "description": "Filter by parent category ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by parent category ID",
            "name": "parentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of categories",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Categories"
        ],
        "summary": "Create category",
        "description": "\nCreate a new category in the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Validation:**\n- Name is required (1-100 characters)\n- Description is optional (max 500 characters)\n- Color must be in hex format (#RRGGBB)\n- Parent category must exist if specified\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoryRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryCreatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories/tree": {
      "get": {
        "tags": [
          "Categories"
        ],
        "summary": "Get category tree",
        "description": "\nRetrieve categories in a hierarchical tree structure.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can view the category tree\n\n**Response:**\nReturns root categories with nested children arrays.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Category tree structure",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryTreeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories/stats": {
      "get": {
        "tags": [
          "Categories"
        ],
        "summary": "Get category statistics",
        "description": "\nRetrieve ticket counts per category for the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Response:**\nReturns an array of category IDs with their associated ticket counts.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Category statistics with ticket counts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories/{id}": {
      "get": {
        "tags": [
          "Categories"
        ],
        "summary": "Get category by ID",
        "description": "\nRetrieve a single category by its ID.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can view category details\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Category ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Category ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Category details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Categories"
        ],
        "summary": "Update category",
        "description": "\nUpdate an existing category.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Validation:**\n- All fields are optional\n- Name must be 1-100 characters if provided\n- Color must be in hex format (#RRGGBB) if provided\n- Cannot set a category as its own parent\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Category ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Category ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategoryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryUpdatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Categories"
        ],
        "summary": "Delete category",
        "description": "\nDelete a category from the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Behavior:**\n- If the category has no associated tickets, it is permanently deleted\n- If the category has tickets, it is deactivated instead (soft delete)\n\n**Response:**\n- `deleted: true` - Category was permanently deleted\n- `deleted: false` - Category was deactivated (has associated tickets)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Category ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Category ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Category deleted or deactivated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteCategoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/respond/{token}": {
      "get": {
        "tags": [
          "CSAT"
        ],
        "summary": "Get survey by token",
        "description": "\nRetrieve a CSAT survey using its unique access token.\n\n**Access Control:**\n- Public endpoint - no authentication required\n- Token-based access for customers\n\n**Response:**\nReturns survey details and ticket information for the customer to respond.\n",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Unique survey access token"
            },
            "required": true,
            "description": "Unique survey access token",
            "name": "token",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Survey details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CSATSurveyPublic"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "CSAT"
        ],
        "summary": "Submit survey response",
        "description": "\nSubmit a customer satisfaction response for a survey.\n\n**Access Control:**\n- Public endpoint - no authentication required\n- Token-based access for customers\n\n**Validation:**\n- Rating must be between 1 and 5\n- Feedback is optional (max 2000 characters)\n- Survey must not be expired\n- Survey can only be submitted once\n",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Unique survey access token"
            },
            "required": true,
            "description": "Unique survey access token",
            "name": "token",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitSurveyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Survey response submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CSATSurveyPublic"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/{organizationId}": {
      "get": {
        "tags": [
          "CSAT"
        ],
        "summary": "List surveys",
        "description": "\nRetrieve all CSAT surveys for an organization with filtering and pagination.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Filtering:**\n- Filter by agent, rating, date range, or response status\n- Results are paginated\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "default": 1,
              "description": "Page number"
            },
            "required": false,
            "description": "Page number",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "maximum": 100,
              "default": 20,
              "description": "Items per page"
            },
            "required": false,
            "description": "Items per page",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by assigned agent",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by assigned agent",
            "name": "agentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5,
              "description": "Filter by rating"
            },
            "required": false,
            "description": "Filter by rating",
            "name": "rating",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter from date (ISO 8601)"
            },
            "required": false,
            "description": "Filter from date (ISO 8601)",
            "name": "dateFrom",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter to date (ISO 8601)"
            },
            "required": false,
            "description": "Filter to date (ISO 8601)",
            "name": "dateTo",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by response status ('true' or 'false')"
            },
            "required": false,
            "description": "Filter by response status ('true' or 'false')",
            "name": "responded",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of surveys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CSATSurveyListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/{organizationId}/stats": {
      "get": {
        "tags": [
          "CSAT"
        ],
        "summary": "Get CSAT statistics",
        "description": "\nRetrieve aggregated CSAT statistics for an organization.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Statistics Included:**\n- Total surveys and responses\n- Response rate\n- Average rating\n- Rating distribution\n- CSAT score (percentage of 4-5 ratings)\n\n**Filtering:**\n- Filter by date range and agent\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by agent ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by agent ID",
            "name": "agentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter from date (ISO 8601)"
            },
            "required": false,
            "description": "Filter from date (ISO 8601)",
            "name": "dateFrom",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter to date (ISO 8601)"
            },
            "required": false,
            "description": "Filter to date (ISO 8601)",
            "name": "dateTo",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "CSAT statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CSATStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/{organizationId}/agents": {
      "get": {
        "tags": [
          "CSAT"
        ],
        "summary": "Get agent performance stats",
        "description": "\nRetrieve CSAT performance metrics grouped by agent.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Metrics Per Agent:**\n- Total surveys\n- Response count\n- Average rating\n- CSAT score\n\n**Filtering:**\n- Filter by date range\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by agent ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by agent ID",
            "name": "agentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter from date (ISO 8601)"
            },
            "required": false,
            "description": "Filter from date (ISO 8601)",
            "name": "dateFrom",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter to date (ISO 8601)"
            },
            "required": false,
            "description": "Filter to date (ISO 8601)",
            "name": "dateTo",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Agent performance statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/{organizationId}/{surveyId}": {
      "get": {
        "tags": [
          "CSAT"
        ],
        "summary": "Get single survey",
        "description": "\nRetrieve a single CSAT survey by ID.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Survey ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Survey ID",
            "name": "surveyId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Survey details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CSATSurvey"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/{organizationId}/send/{ticketId}": {
      "post": {
        "tags": [
          "CSAT"
        ],
        "summary": "Send survey for ticket",
        "description": "\nManually trigger sending a CSAT survey for a specific ticket.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Behavior:**\n- Creates a new survey for the ticket\n- Sends email to customer with survey link\n- Ticket should be in resolved or closed status\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "ticketId",
            "in": "path"
          }
        ],
        "responses": {
          "201": {
            "description": "Survey created and sent",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CSATSurvey"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/csat/{organizationId}/send-bulk": {
      "post": {
        "tags": [
          "CSAT"
        ],
        "summary": "Bulk send surveys",
        "description": "\nSend CSAT surveys to all eligible tickets that haven't received surveys.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Behavior:**\n- Finds all resolved/closed tickets without surveys\n- Creates and sends surveys for each\n- Returns count of sent, skipped, and failed surveys\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Bulk send results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkSendResult"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/stats": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get dashboard statistics",
        "description": "\nRetrieve key dashboard statistics for the organization.\n\n**Access Control:**\n- Requires authentication\n- Requires agent, admin, or owner role\n\n**Statistics Included:**\n- **Ticket counts**: Total, open, pending, resolved, and closed tickets\n- **Performance metrics**: Average first response time, resolution time, SLA compliance\n- **Agent stats**: Total and active agent counts\n\n**Filtering:**\n- Optionally filter by date range using startDate and endDate\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "nullable": true,
              "format": "date",
              "description": "Start date for filtering stats"
            },
            "required": false,
            "description": "Start date for filtering stats",
            "name": "startDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "nullable": true,
              "format": "date",
              "description": "End date for filtering stats"
            },
            "required": false,
            "description": "End date for filtering stats",
            "name": "endDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/trends": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get ticket trends",
        "description": "\nRetrieve ticket trend data over time for charting.\n\n**Access Control:**\n- Requires authentication\n- Requires agent, admin, or owner role\n\n**Data Included:**\nFor each period, returns:\n- Date\n- Tickets created\n- Tickets resolved\n- Tickets closed\n\n**Parameters:**\n- `period`: Time granularity (day, week, month)\n- `periods`: Number of periods to return (1-52)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "day",
                "week",
                "month"
              ],
              "default": "week",
              "description": "Time period for trend data"
            },
            "required": false,
            "description": "Time period for trend data",
            "name": "period",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 52,
              "default": 7,
              "description": "Number of periods to look back (1-52)"
            },
            "required": false,
            "description": "Number of periods to look back (1-52)",
            "name": "periods",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket trend data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardTrendsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/priority-distribution": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get priority distribution",
        "description": "\nRetrieve ticket distribution by priority level.\n\n**Access Control:**\n- Requires authentication\n- Requires agent, admin, or owner role\n\n**Response:**\nReturns count and percentage for each priority level (low, medium, high, urgent).\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Priority distribution data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PriorityDistributionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/agent-performance": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get agent performance metrics",
        "description": "\nRetrieve performance metrics for all agents in the organization.\n\n**Access Control:**\n- Requires authentication\n- Requires admin or owner role (higher access level)\n\n**Metrics Per Agent:**\n- Tickets assigned and resolved\n- Average response and resolution times\n- SLA compliance rate\n- CSAT score (if available)\n\n**Use Cases:**\n- Team performance monitoring\n- Agent workload analysis\n- Identifying training needs\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Agent performance metrics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentPerformanceResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/export/{organizationId}/fields": {
      "get": {
        "tags": [
          "Export"
        ],
        "summary": "Get available export fields",
        "description": "\nRetrieve the list of available fields for ticket exports.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Response:**\nReturns all fields that can be included in exports with their names and descriptions.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "List of available export fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExportFieldsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/export/{organizationId}/tickets": {
      "get": {
        "tags": [
          "Export"
        ],
        "summary": "Export tickets",
        "description": "\nExport tickets in CSV or XLSX format with optional filtering.\n\n**Access Control:**\n- Requires authentication\n- Must be a member of the organization\n\n**Export Formats:**\n- `csv`: Comma-separated values (default)\n- `xlsx`: Microsoft Excel format\n\n**Available Fields:**\n- `ticketNumber`: Unique ticket identifier\n- `title`: Ticket subject\n- `description`: Ticket content\n- `status`: Current status (open, pending, resolved, closed)\n- `priority`: Priority level (low, medium, high, urgent)\n- `channel`: Source channel (web, email, api, chat)\n- `customerName`: Customer's full name\n- `customerEmail`: Customer's email address\n- `assigneeName`: Assigned agent's name\n- `assigneeEmail`: Assigned agent's email\n- `categoryName`: Category name\n- `tags`: Comma-separated tag names\n- `createdAt`: Creation timestamp\n- `updatedAt`: Last update timestamp\n- `resolvedAt`: Resolution timestamp\n- `closedAt`: Close timestamp\n- `firstResponseAt`: First response timestamp\n- `slaResponseDue`: SLA response deadline\n- `slaResolutionDue`: SLA resolution deadline\n\n**Filtering:**\n- Filter by status, priority, assignee, category\n- Filter by date range\n- Search in title and description\n\n**Response:**\nReturns a file download with appropriate content type headers.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "csv",
                "xlsx"
              ],
              "default": "csv",
              "description": "Export file format",
              "example": "csv"
            },
            "required": false,
            "description": "Export file format",
            "name": "format",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Comma-separated list of fields to include. Defaults to all fields."
            },
            "required": false,
            "description": "Comma-separated list of fields to include. Defaults to all fields.",
            "name": "fields",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "open",
                "pending",
                "resolved",
                "closed"
              ],
              "description": "Filter by ticket status",
              "example": "open"
            },
            "required": false,
            "description": "Filter by ticket status",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Filter by ticket priority",
              "example": "medium"
            },
            "required": false,
            "description": "Filter by ticket priority",
            "name": "priority",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by assigned agent ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by assigned agent ID",
            "name": "assigneeId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by category ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by category ID",
            "name": "categoryId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter tickets created from this date"
            },
            "required": false,
            "description": "Filter tickets created from this date",
            "name": "dateFrom",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter tickets created until this date"
            },
            "required": false,
            "description": "Filter tickets created until this date",
            "name": "dateTo",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Search in ticket title and description"
            },
            "required": false,
            "description": "Search in ticket title and description",
            "name": "search",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Exported file download",
            "headers": {
              "Content-Disposition": {
                "schema": {
                  "type": "string",
                  "description": "File download header (e.g., attachment; filename=\"tickets-export.csv\")"
                },
                "required": true,
                "description": "File download header (e.g., attachment; filename=\"tickets-export.csv\")"
              }
            },
            "content": {
              "text/csv": {
                "schema": {
                  "type": "string",
                  "description": "CSV file content"
                }
              },
              "application/vnd.ms-excel": {
                "schema": {
                  "type": "string",
                  "description": "XLSX file content (binary)"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/public": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "List public plans",
        "description": "\nRetrieve all visible and active plans for the pricing page.\n\n**Access Control:**\n- Public endpoint - no authentication required\n\n**Response:**\nReturns a list of plans with limited fields suitable for public display.\nInternal fields like Stripe IDs and metadata are excluded.\n",
        "responses": {
          "200": {
            "description": "List of public plans",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicPlanListResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/public/{slug}": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Get public plan by slug",
        "description": "\nRetrieve a single plan by its URL-friendly slug.\n\n**Access Control:**\n- Public endpoint - no authentication required\n\n**Response:**\nReturns plan details suitable for public display.\nReturns 404 if the plan is not found, inactive, or hidden.\n",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Plan slug"
            },
            "required": true,
            "description": "Plan slug",
            "name": "slug",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Public plan details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicPlanResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/plans": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "List all plans (admin view)",
        "description": "\nRetrieve all plans with full details for administrative management.\n\n**Access Control:**\n- Requires owner role\n\n**Query Parameters:**\n- `includeInactive`: Include inactive plans in the response\n- `includeHidden`: Include hidden plans in the response\n\n**Response:**\nReturns complete plan information including internal fields.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Include inactive plans (true/false)"
            },
            "required": false,
            "description": "Include inactive plans (true/false)",
            "name": "includeInactive",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Include hidden plans (true/false)"
            },
            "required": false,
            "description": "Include hidden plans (true/false)",
            "name": "includeHidden",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of all plans",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "Create a new plan",
        "description": "\nCreate a new subscription plan.\n\n**Access Control:**\n- Requires owner role\n\n**Validation:**\n- Name is required (1-100 characters)\n- Slug must be lowercase alphanumeric with dashes\n- Price must be non-negative (in cents)\n- Currency must be 3 characters (e.g., USD)\n\n**Default Plan:**\nIf `isDefault` is set to true, any existing default plan will be unmarked.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Plan created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanCreatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/{id}": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Get plan by ID (admin view)",
        "description": "\nRetrieve a single plan by its ID with full details.\n\n**Access Control:**\n- Requires owner role\n\n**Response:**\nReturns complete plan information including internal fields.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Plan ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Plan ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Plans"
        ],
        "summary": "Update a plan",
        "description": "\nUpdate an existing subscription plan.\n\n**Access Control:**\n- Requires owner role\n\n**Partial Updates:**\nOnly the fields provided will be updated. Omitted fields remain unchanged.\n\n**Notes:**\n- Changing limits/features affects new subscriptions immediately\n- Existing subscriptions may need to be refreshed to apply changes\n- Setting `isDefault` to true will unmark any other default plan\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Plan ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Plan ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlanRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanUpdatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Plans"
        ],
        "summary": "Delete a plan",
        "description": "\nDelete a subscription plan.\n\n**Access Control:**\n- Requires owner role\n\n**Restrictions:**\n- Cannot delete a plan that has active subscriptions\n- Consider deactivating the plan instead of deleting\n\n**Note:**\nThis action is irreversible. Make sure no organizations are using this plan before deletion.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Plan ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Plan ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanDeletedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/seed": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "Seed default plans",
        "description": "\nInitialize the system with default subscription plans.\n\n**Access Control:**\n- Requires owner role\n\n**Behavior:**\n- Creates default Free, Starter, Professional, and Enterprise plans if none exist\n- Returns 200 with existing plans if plans already exist\n- Returns 201 if new plans were created\n\n**Use Cases:**\n- Initial system setup\n- Development environment initialization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Plans already exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanSeedExistingResponse"
                }
              }
            }
          },
          "201": {
            "description": "Default plans created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanSeedCreatedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/current": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get current subscription",
        "description": "\nRetrieve the current subscription for the organization.\n\n**Access Control:**\n- Requires authentication (any role)\n\n**Response:**\nReturns the complete subscription details including:\n- Plan information and limits\n- Subscription status\n- Billing period dates\n- Cancellation status\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Current subscription details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentSubscriptionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/usage": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get current usage",
        "description": "\nRetrieve current usage statistics for the organization.\n\n**Access Control:**\n- Requires authentication (any role)\n\n**Response:**\nReturns usage data for all tracked metrics:\n- Tickets created this period\n- Messages sent this period\n- Storage used\n- API requests made\n\nEach metric includes the current value, limit, remaining, and percentage used.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Current usage statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/usage/history": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get usage history",
        "description": "\nRetrieve historical usage data for the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Query Parameters:**\n- `periodStart`: Filter records from this date (ISO 8601)\n- `periodEnd`: Filter records until this date (ISO 8601)\n\n**Response:**\nReturns a list of usage records for past billing periods.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter from date (ISO 8601)"
            },
            "required": false,
            "description": "Filter from date (ISO 8601)",
            "name": "periodStart",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Filter to date (ISO 8601)"
            },
            "required": false,
            "description": "Filter to date (ISO 8601)",
            "name": "periodEnd",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Usage history records",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageHistoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/limits/{type}": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Check specific limit",
        "description": "\nCheck if a specific usage type is within limits.\n\n**Access Control:**\n- Requires authentication (any role)\n\n**Path Parameters:**\n- `type`: The usage type to check (tickets, messages, storage, api)\n\n**Response:**\nReturns detailed limit information including:\n- Whether the action is allowed\n- Current usage and limit\n- Remaining capacity\n- Alert status\n- Upgrade URL if limit is reached\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "tickets",
                "messages",
                "storage",
                "api"
              ],
              "description": "Usage type to check",
              "example": "tickets"
            },
            "required": true,
            "description": "Usage type to check",
            "name": "type",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Limit check result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LimitCheckResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/change-plan": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Change subscription plan",
        "description": "\nChange the organization's subscription to a different plan.\n\n**Access Control:**\n- Requires owner role\n\n**Request Body:**\n- `planId`: UUID of the plan to switch to\n\n**Behavior:**\n- Upgrades take effect immediately\n- Downgrades may take effect at the end of the billing period\n- Usage limits are updated according to the new plan\n\n**Note:**\nChanging plans may affect billing. Review the plan details before confirming.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePlanRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan changed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChangePlanSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/cancel": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Cancel subscription",
        "description": "\nCancel the organization's subscription.\n\n**Access Control:**\n- Requires owner role\n\n**Request Body:**\n- `immediately`: If true, cancels immediately. If false/omitted, cancels at period end.\n\n**Behavior:**\n- Immediate cancellation stops access immediately\n- End-of-period cancellation allows continued access until the billing period ends\n- Canceled subscriptions can be reactivated before the cancellation takes effect\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CancelSubscriptionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Subscription canceled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CancelSubscriptionSuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/subscriptions/reactivate": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Reactivate canceled subscription",
        "description": "\nReactivate a subscription that was scheduled for cancellation.\n\n**Access Control:**\n- Requires owner role\n\n**Behavior:**\n- Only works for subscriptions canceled at period end\n- Removes the pending cancellation\n- Subscription continues as normal\n\n**Note:**\nCannot reactivate immediately canceled subscriptions.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription reactivated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReactivateSubscriptionSuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/status": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get status of all scheduled jobs",
        "description": "\nRetrieve the current status of all scheduled background jobs.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Response:**\nReturns a list of all scheduled jobs with their:\n- Schedule (cron expression)\n- Last run timestamp\n- Next scheduled run\n- Current running state\n- Scheduler uptime\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Job status information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/{name}/trigger": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "summary": "Manually trigger a job",
        "description": "\nManually trigger execution of a specific background job.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Available Jobs:**\n- `sla-breach`: Check for SLA breaches and send notifications\n- `auto-close`: Close inactive tickets automatically\n- `subscription-reset`: Reset monthly usage counters\n\n**Use Cases:**\n- Testing job behavior\n- Forcing immediate execution outside schedule\n- Recovery after system issues\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Name of the job to trigger"
            },
            "required": true,
            "description": "Name of the job to trigger",
            "name": "name",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Job triggered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobTriggerResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/sla/stats": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Get SLA statistics",
        "description": "\nRetrieve SLA compliance statistics for the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Statistics Include:**\n- Total tickets with SLA policies applied\n- Number of breached tickets\n- Number of at-risk tickets\n- Number of on-track tickets\n- Overall breach rate percentage\n- Average first response time\n- Average resolution time\n\n**Note:**\nStatistics are calculated based on tickets within the current organization.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "SLA statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlaStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/auto-close/preview": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "summary": "Preview auto-close candidates",
        "description": "\nPreview tickets that would be affected by the auto-close job.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Response:**\nReturns a list of tickets that meet the auto-close criteria:\n- Have been inactive for the configured number of days\n- Are in an eligible status for auto-close\n\n**Use Cases:**\n- Reviewing tickets before they are automatically closed\n- Adjusting auto-close settings based on preview\n- Identifying tickets that may need attention\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Auto-close preview",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AutoClosePreviewResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}/messages": {
      "get": {
        "tags": [
          "Messages"
        ],
        "summary": "List messages for a ticket",
        "description": "\nRetrieve all messages in a ticket thread.\n\n**Access Control:**\n- Customers see only public replies (not internal notes)\n- Agents/Admins see all messages including internal notes\n- Must have access to the parent ticket\n\n**Message Types:**\n- `reply`: Public message visible to customer\n- `internal_note`: Staff-only note, hidden from customers\n- `system`: Automated system messages\n\n**Ordering:**\n- Messages are returned in chronological order (oldest first)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "reply",
                "internal_note",
                "system"
              ],
              "description": "Filter by message type",
              "example": "reply"
            },
            "required": false,
            "description": "Filter by message type",
            "name": "type",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1,
              "description": "Page number"
            },
            "required": false,
            "description": "Page number",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "description": "Items per page"
            },
            "required": false,
            "description": "Items per page",
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of messages",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Ticket not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Ticket not found"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Messages"
        ],
        "summary": "Create a new message",
        "description": "\nAdd a new message to a ticket thread.\n\n**Access Control:**\n- Customers can create replies on their own tickets\n- Agents can create replies and internal notes\n- Internal notes are only visible to staff\n\n**Effects:**\n- Updates ticket's updatedAt timestamp\n- First agent reply sets firstResponseAt (for SLA)\n- May trigger email notifications\n\n**Attachments:**\n- Upload files first via /api/attachments\n- Include attachment metadata in the request\n- Maximum 10 attachments per message\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateMessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}/messages/{messageId}": {
      "get": {
        "tags": [
          "Messages"
        ],
        "summary": "Get a specific message",
        "description": "\nRetrieve a single message by ID.\n\n**Access Control:**\n- Same as listing messages\n- Customers cannot access internal notes\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Message ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Message ID",
            "name": "messageId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Message details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Messages"
        ],
        "summary": "Update a message",
        "description": "\nEdit the content of an existing message.\n\n**Access Control:**\n- Users can only edit their own messages\n- Agents/Admins can edit any non-system message\n\n**Notes:**\n- isEdited flag is set to true\n- Original content is not preserved\n- Attachments cannot be modified (delete and recreate instead)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Message ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Message ID",
            "name": "messageId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMessageRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Message updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateMessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Messages"
        ],
        "summary": "Delete a message",
        "description": "\nDelete a message from a ticket thread.\n\n**Access Control:**\n- Users can delete their own messages (within time limit)\n- Admins/Owners can delete any message\n\n**Notes:**\n- Associated attachments are also deleted\n- System messages cannot be deleted\n- Action is logged in ticket activity\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Message ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Message ID",
            "name": "messageId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Message deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteMessageResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "List user's organizations",
        "description": "\nRetrieve all organizations the current user is a member of.\n\n**Notes:**\n- Returns organizations in order of most recently accessed\n- Includes user's role in each organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "maxLength": 100,
              "description": "Search by name"
            },
            "required": false,
            "description": "Search by name",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "List of organizations",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Organizations"
        ],
        "summary": "Create a new organization",
        "description": "\nCreate a new organization with the current user as owner.\n\n**Notes:**\n- User becomes the organization owner automatically\n- Slug must be unique across all organizations\n- Slug is used in URLs and cannot be changed easily\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrganizationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Organization created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateOrganizationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Slug already taken",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Slug is already taken"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Get organization details",
        "description": "\nRetrieve detailed information about an organization.\n\n**Access Control:**\n- Must be a member of the organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Organization details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Organizations"
        ],
        "summary": "Update organization",
        "description": "\nUpdate organization name or settings.\n\n**Access Control:**\n- Requires admin or owner role\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOrganizationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Organization updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateOrganizationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/members": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "List organization members",
        "description": "\nRetrieve all members of an organization.\n\n**Access Control:**\n- Must be a member of the organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "maxLength": 100,
              "description": "Search by name or email"
            },
            "required": false,
            "description": "Search by name or email",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "List of members",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemberListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Organizations"
        ],
        "summary": "Invite a new member",
        "description": "\nSend an invitation to join the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Notes:**\n- Invitation email is sent automatically\n- Invitation expires after 7 days\n- Existing members cannot be invited again\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InviteMemberRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Invitation sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InviteMemberResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "User is already a member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "User is already a member of this organization"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/members/{userId}": {
      "patch": {
        "tags": [
          "Organizations"
        ],
        "summary": "Update member role",
        "description": "\nChange a member's role in the organization.\n\n**Access Control:**\n- Requires admin or owner role\n- Cannot change owner's role\n- Cannot change your own role\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to update",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to update",
            "name": "userId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMemberRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateMemberRoleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Organizations"
        ],
        "summary": "Remove member from organization",
        "description": "\nRemove a member from the organization.\n\n**Access Control:**\n- Requires admin or owner role\n- Cannot remove the organization owner\n- Cannot remove yourself\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to remove",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to remove",
            "name": "userId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RemoveMemberResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/invitations": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "List organization invitations",
        "description": "\nRetrieve all invitations for an organization.\n\n**Access Control:**\n- Requires admin or owner role\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "accepted",
                "expired",
                "cancelled"
              ],
              "description": "Filter by status"
            },
            "required": false,
            "description": "Filter by status",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "List of invitations",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InvitationListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/invitations/{invitationId}": {
      "delete": {
        "tags": [
          "Organizations"
        ],
        "summary": "Cancel an invitation",
        "description": "\nCancel a pending invitation.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Notes:**\n- Only pending invitations can be cancelled\n- Cancelled invitations cannot be restored\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Invitation ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Invitation ID",
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CancelInvitationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/invitations/{invitationId}/resend": {
      "post": {
        "tags": [
          "Organizations"
        ],
        "summary": "Resend an invitation",
        "description": "\nResend a pending invitation with a new expiration date.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Notes:**\n- Only pending invitations can be resent\n- New expiration date is set (7 days from now)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Invitation ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Invitation ID",
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation resent",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResendInvitationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/invitations/preview/{token}": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Preview invitation details",
        "description": "\nGet details about an invitation using its token.\n\n**Notes:**\n- This endpoint does not require authentication\n- Used for showing invitation details before accepting\n- Returns organization and role information\n",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Invitation token from email"
            },
            "required": true,
            "description": "Invitation token from email",
            "name": "token",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InvitationPreviewResponse"
                }
              }
            }
          },
          "404": {
            "description": "Invitation not found or expired",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Invitation not found or expired"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/invitations/accept": {
      "post": {
        "tags": [
          "Organizations"
        ],
        "summary": "Accept an invitation",
        "description": "\nAccept an invitation to join an organization.\n\n**Notes:**\n- Requires authentication\n- Email must match the invitation email\n- User is added as member with the invited role\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptInvitationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AcceptInvitationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired invitation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Invalid or expired invitation token"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Email mismatch",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Invitation was sent to a different email"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/deactivate": {
      "post": {
        "tags": [
          "Organizations"
        ],
        "summary": "Deactivate organization",
        "description": "\nDeactivate an organization, preventing access.\n\n**Access Control:**\n- Requires owner role\n\n**Effects:**\n- Organization becomes inaccessible\n- Members can no longer sign in with org context\n- Data is preserved\n- Can be reactivated later\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Organization deactivated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeactivateOrganizationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organizations/{organizationId}/reactivate": {
      "post": {
        "tags": [
          "Organizations"
        ],
        "summary": "Reactivate organization",
        "description": "\nReactivate a previously deactivated organization.\n\n**Access Control:**\n- Requires owner role\n\n**Effects:**\n- Organization becomes accessible again\n- All data and members are restored\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "organizationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Organization reactivated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReactivateOrganizationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/saved-filters": {
      "get": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "List saved filters",
        "description": "\nRetrieve all saved filters for the current user.\n\n**Access Control:**\n- Requires authentication\n- Returns user's own filters and optionally shared filters\n\n**Filtering:**\n- Use `includeShared` to include/exclude filters shared by other organization members\n- Results are ordered by position\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "boolean",
              "default": true,
              "description": "Include filters shared by other users"
            },
            "required": false,
            "description": "Include filters shared by other users",
            "name": "includeShared",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of saved filters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SavedFilterListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Create saved filter",
        "description": "\nCreate a new saved filter for quick access to filtered ticket views.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can create filters\n\n**Features:**\n- Set as default filter for the user\n- Share with organization members\n- Customize with color and icon\n- Define complex filter criteria\n\n**Validation:**\n- Name is required (1-100 characters)\n- Color must be in hex format (#RRGGBB)\n- Setting isDefault will unset any existing default filter\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSavedFilterRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Filter created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SavedFilterCreatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/saved-filters/default": {
      "get": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Get default filter",
        "description": "\nRetrieve the user's default saved filter.\n\n**Access Control:**\n- Requires authentication\n- Returns the filter marked as default for the current user\n\n**Response:**\nReturns null if no default filter is set.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Default saved filter or null",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSavedFilterResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/saved-filters/{id}": {
      "get": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Get filter by ID",
        "description": "\nRetrieve a specific saved filter by its ID.\n\n**Access Control:**\n- Requires authentication\n- User can view their own filters\n- User can view shared filters from their organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Saved filter ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Saved filter ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Saved filter details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SavedFilterResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Update filter",
        "description": "\nUpdate an existing saved filter.\n\n**Access Control:**\n- Requires authentication\n- User can only update their own filters\n\n**Partial Updates:**\n- Only provided fields are updated\n- Omitted fields remain unchanged\n\n**Notes:**\n- Setting isDefault=true will unset any existing default filter\n- Color can be set to null to remove it\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Saved filter ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Saved filter ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSavedFilterRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Filter updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdatedFilterResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Delete filter",
        "description": "\nDelete a saved filter.\n\n**Access Control:**\n- Requires authentication\n- User can only delete their own filters\n\n**Behavior:**\n- Filter is permanently removed\n- This action cannot be undone\n- If deleting the default filter, no new default is set automatically\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Saved filter ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Saved filter ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "204": {
            "description": "Filter deleted successfully (no content)"
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/saved-filters/reorder": {
      "post": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Reorder filters",
        "description": "\nUpdate the display order of saved filters.\n\n**Access Control:**\n- Requires authentication\n- User can only reorder their own filters\n\n**Behavior:**\n- Provide an ordered list of filter IDs\n- Position is assigned based on order in the array\n- All filter IDs must belong to the current user\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReorderFiltersRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Filters reordered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReorderedFiltersResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/saved-filters/{id}/duplicate": {
      "post": {
        "tags": [
          "Saved Filters"
        ],
        "summary": "Duplicate filter",
        "description": "\nCreate a copy of an existing saved filter.\n\n**Access Control:**\n- Requires authentication\n- User can duplicate their own filters\n- User can duplicate shared filters from their organization\n\n**Behavior:**\n- Creates a new filter with the same criteria\n- Name is appended with \" (Copy)\"\n- New filter is not set as default\n- New filter is not shared (private to user)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Saved filter ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Saved filter ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "201": {
            "description": "Filter duplicated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DuplicatedFilterResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sla-policies": {
      "get": {
        "tags": [
          "SLA Policies"
        ],
        "summary": "List SLA policies",
        "description": "\nRetrieve all SLA policies for the current organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Filtering:**\n- Use `priority` to filter policies by priority level (low, medium, high, urgent)\n\n**SLA Policy Details:**\nEach policy defines target response and resolution times for tickets of a specific priority.\nTimes are specified in minutes.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Filter by priority level",
              "example": "medium"
            },
            "required": false,
            "description": "Filter by priority level",
            "name": "priority",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of SLA policies",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlaPolicyListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "SLA Policies"
        ],
        "summary": "Create SLA policy",
        "description": "\nCreate a new SLA policy for the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Validation:**\n- Name is required (1-100 characters)\n- Priority must be one of: low, medium, high, urgent\n- First response time: 1 to 10,080 minutes (1 minute to 7 days)\n- Resolution time: 1 to 43,200 minutes (1 minute to 30 days)\n\n**Note:**\nIf a policy already exists for the specified priority, it will be updated instead of creating a duplicate.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSlaPolicyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "SLA policy created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlaPolicyCreatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sla-policies/{id}": {
      "get": {
        "tags": [
          "SLA Policies"
        ],
        "summary": "Get SLA policy by ID",
        "description": "\nRetrieve a single SLA policy by its ID.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Response:**\nReturns the complete SLA policy details including target times and configuration.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "SLA Policy ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "SLA Policy ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "SLA policy details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlaPolicyResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "SLA Policies"
        ],
        "summary": "Update SLA policy",
        "description": "\nUpdate an existing SLA policy.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Updatable Fields:**\n- `name`: Policy name\n- `firstResponseTime`: Target first response time in minutes\n- `resolutionTime`: Target resolution time in minutes\n- `businessHoursOnly`: Whether SLA times only count during business hours\n- `isDefault`: Whether this is a default policy\n\n**Note:**\nPriority cannot be changed after creation. To change priority, delete and recreate the policy.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "SLA Policy ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "SLA Policy ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSlaPolicyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "SLA policy updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlaPolicyUpdatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "SLA Policies"
        ],
        "summary": "Delete SLA policy",
        "description": "\nDelete an SLA policy from the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Warning:**\nDeleting an SLA policy will cause tickets of that priority to fall back to default SLA times.\nExisting tickets will retain their current SLA deadlines.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "SLA Policy ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "SLA Policy ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "204": {
            "description": "SLA policy deleted successfully (no content)"
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sla-policies/initialize": {
      "post": {
        "tags": [
          "SLA Policies"
        ],
        "summary": "Initialize default SLA policies",
        "description": "\nInitialize the organization with default SLA policies for all priority levels.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Default Policies:**\nCreates policies with sensible defaults for each priority level:\n- **Urgent**: 15 min first response, 4 hours resolution\n- **High**: 1 hour first response, 8 hours resolution\n- **Medium**: 4 hours first response, 24 hours resolution\n- **Low**: 8 hours first response, 72 hours resolution\n\n**Note:**\nThis endpoint is idempotent. Calling it multiple times will not create duplicate policies.\nExisting policies for a priority level will not be overwritten.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "201": {
            "description": "Default SLA policies initialized successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlaPoliciesInitializedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tags": {
      "get": {
        "tags": [
          "Tags"
        ],
        "summary": "List tags",
        "description": "\nRetrieve all tags for the current organization.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can view tags\n\n**Filtering:**\n- Use `search` to filter tags by name (partial match)\n- Use `limit` to control the number of results\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "maxLength": 50,
              "description": "Search string to filter tags by name"
            },
            "required": false,
            "description": "Search string to filter tags by name",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "description": "Maximum number of results (1-100)"
            },
            "required": false,
            "description": "Maximum number of results (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of tags",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Tags"
        ],
        "summary": "Create tag",
        "description": "\nCreate a new tag in the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Validation:**\n- Name is required (1-50 characters)\n- Name will be converted to lowercase and trimmed\n- Color must be in hex format (#RRGGBB)\n- Tag names must be unique within the organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTagRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tag created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagCreatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tags/popular": {
      "get": {
        "tags": [
          "Tags"
        ],
        "summary": "Get popular tags",
        "description": "\nRetrieve the most frequently used tags in the organization.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can view popular tags\n\n**Response:**\nReturns tags sorted by usage count (highest first).\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 20,
              "default": 10,
              "description": "Number of popular tags to return (1-20)"
            },
            "required": false,
            "description": "Number of popular tags to return (1-20)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Popular tags with usage counts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PopularTagsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tags/autocomplete": {
      "get": {
        "tags": [
          "Tags"
        ],
        "summary": "Autocomplete tags",
        "description": "\nGet tags for autocomplete suggestions when tagging tickets.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can use autocomplete\n\n**Usage:**\nDesigned for real-time search as users type tag names.\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "maxLength": 50,
              "description": "Search string to filter tags by name"
            },
            "required": false,
            "description": "Search string to filter tags by name",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "description": "Maximum number of results (1-100)"
            },
            "required": false,
            "description": "Maximum number of results (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Autocomplete tag suggestions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AutocompleteTagsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tags/stats": {
      "get": {
        "tags": [
          "Tags"
        ],
        "summary": "Get tag statistics",
        "description": "\nRetrieve tag usage statistics for the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Statistics Included:**\n- Total number of tags\n- Tags in use vs unused\n- Top tags by usage\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Tag usage statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tags/{name}": {
      "get": {
        "tags": [
          "Tags"
        ],
        "summary": "Get tag by name",
        "description": "\nRetrieve a single tag by its name.\n\n**Access Control:**\n- Requires authentication\n- All authenticated users can view tag details\n\n**Note:**\nTag names are case-insensitive (stored as lowercase).\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50,
              "description": "Tag name"
            },
            "required": true,
            "description": "Tag name",
            "name": "name",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Tag details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Tags"
        ],
        "summary": "Update tag",
        "description": "\nUpdate an existing tag.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Validation:**\n- All fields are optional\n- Name must be 1-50 characters if provided\n- Name will be converted to lowercase\n- Color must be in hex format (#RRGGBB) if provided\n- New name must be unique within the organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50,
              "description": "Current tag name"
            },
            "required": true,
            "description": "Current tag name",
            "name": "name",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTagRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagUpdatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Resource already exists or operation conflicts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Tags"
        ],
        "summary": "Delete tag",
        "description": "\nDelete a tag from the organization.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Behavior:**\n- The tag is permanently deleted\n- The tag is automatically removed from all tickets that had it\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50,
              "description": "Tag name to delete"
            },
            "required": true,
            "description": "Tag name to delete",
            "name": "name",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Tag deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagDeletedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets": {
      "get": {
        "tags": [
          "Tickets"
        ],
        "summary": "List tickets",
        "description": "\nRetrieve a paginated list of tickets based on filters and user permissions.\n\n**Access Control:**\n- Customers see only their own tickets\n- Agents see assigned tickets and unassigned tickets\n- Admins/Owners see all organization tickets\n\n**Filtering:**\n- Filter by status, priority, assignee, customer\n- Search in title and description\n- Filter by tags (comma-separated)\n\n**Sorting:**\n- Sort by createdAt, updatedAt, priority, or status\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "open",
                "pending",
                "resolved",
                "closed"
              ],
              "description": "Filter by status",
              "example": "open"
            },
            "required": false,
            "description": "Filter by status",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Filter by priority",
              "example": "medium"
            },
            "required": false,
            "description": "Filter by priority",
            "name": "priority",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by assignee",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by assignee",
            "name": "assigneeId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by customer",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Filter by customer",
            "name": "customerId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "maxLength": 100,
              "description": "Search in title and description"
            },
            "required": false,
            "description": "Search in title and description",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Comma-separated tag names"
            },
            "required": false,
            "description": "Comma-separated tag names",
            "name": "tags",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1,
              "description": "Page number"
            },
            "required": false,
            "description": "Page number",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "Items per page"
            },
            "required": false,
            "description": "Items per page",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "priority",
                "status"
              ],
              "default": "createdAt",
              "description": "Sort field"
            },
            "required": false,
            "description": "Sort field",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization context (optional for customers)",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": false,
            "description": "Organization context (optional for customers)",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of tickets",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Create a new ticket",
        "description": "\nCreate a new support ticket.\n\n**Notes:**\n- Ticket number is auto-generated\n- Creator becomes the customer\n- SLA timer starts based on organization policies\n- Tags are matched by name and created if needed\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTicketRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateTicketResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/stats": {
      "get": {
        "tags": [
          "Tickets"
        ],
        "summary": "Get ticket statistics",
        "description": "\nRetrieve aggregate statistics for tickets in the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Statistics Included:**\n- Total count by status\n- Unassigned count\n- Average resolution and first response times\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}": {
      "get": {
        "tags": [
          "Tickets"
        ],
        "summary": "Get ticket details",
        "description": "\nRetrieve full details of a specific ticket.\n\n**Access Control:**\n- Customers can only view their own tickets\n- Agents can view assigned tickets\n- Admins/Owners can view all tickets\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Tickets"
        ],
        "summary": "Update a ticket",
        "description": "\nUpdate ticket properties.\n\n**Access Control:**\n- Customers can update title/description of their own open tickets\n- Agents can update assigned tickets\n- Admins/Owners can update all tickets\n\n**Status Transitions:**\n- open  pending, resolved, closed\n- pending  open, resolved, closed\n- resolved  open (reopen), closed\n- closed  open (reopen)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTicketRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateTicketResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Tickets"
        ],
        "summary": "Delete a ticket",
        "description": "\nPermanently delete a ticket and all associated data.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Warning:**\n- This action is irreversible\n- All messages and attachments are deleted\n- Consider closing instead of deleting for audit purposes\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "204": {
            "description": "Ticket deleted successfully"
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}/activities": {
      "get": {
        "tags": [
          "Tickets"
        ],
        "summary": "Get ticket activity history",
        "description": "\nRetrieve the activity log for a specific ticket.\n\n**Tracked Activities:**\n- Creation, updates, status changes\n- Assignment changes\n- Comments and messages\n- Tag modifications\n- Merges\n\n**Access Control:**\n- Same as viewing the ticket\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated activity history",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketActivitiesResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}/assign": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Assign ticket to agent",
        "description": "\nAssign a ticket to an agent or unassign it.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Notes:**\n- Pass null for assigneeId to unassign\n- Activity is logged for audit\n- Notifications are sent to the assignee\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignTicketRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssignTicketResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}/close": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Close a ticket",
        "description": "\nClose a ticket, marking it as completed.\n\n**Access Control:**\n- Customers can close their own tickets\n- Agents can close assigned tickets\n- Admins/Owners can close any ticket\n\n**Effects:**\n- Status changes to \"closed\"\n- closedAt timestamp is set\n- CSAT survey may be triggered\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CloseTicketRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket closed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CloseTicketResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/{id}/reopen": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Reopen a closed ticket",
        "description": "\nReopen a previously closed or resolved ticket.\n\n**Access Control:**\n- Customers can reopen their own tickets\n- Agents can reopen assigned tickets\n- Admins/Owners can reopen any ticket\n\n**Effects:**\n- Status changes to \"open\"\n- closedAt/resolvedAt are cleared\n- SLA timer may restart\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Ticket ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Ticket ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket reopened successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReopenTicketResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/bulk/update": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Bulk update tickets",
        "description": "\nUpdate multiple tickets at once.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Operations:**\n- Change status, priority, assignee, category\n- Add or remove tags\n\n**Limits:**\n- Maximum 100 tickets per request\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk update results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/bulk/assign": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Bulk assign tickets",
        "description": "\nAssign multiple tickets to the same agent.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Notes:**\n- Pass null for assigneeId to unassign all\n- Activity is logged for each ticket\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkAssignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk assign results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkAssignResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/bulk/delete": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Bulk delete/close tickets",
        "description": "\nDelete or close multiple tickets.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Modes:**\n- `permanent: false` - Soft close (recommended)\n- `permanent: true` - Permanent deletion\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk delete results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tickets/merge": {
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Merge tickets",
        "description": "\nMerge multiple tickets into one.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n\n**Process:**\n1. Messages from secondary tickets are copied to primary\n2. Secondary tickets are closed with merge reference\n3. Original data is preserved for audit\n\n**Limits:**\n- Maximum 10 tickets to merge at once\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MergeTicketsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Merge completed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MergeTicketsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "List users in organization",
        "description": "\nRetrieve a paginated list of users in the current organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n- Organization context required via X-Organization-ID header\n\n**Filtering Options:**\n- `search`: Search by name or email (partial match)\n- `role`: Filter by specific role\n- `isActive`: Filter by account status\n\n**Sorting Options:**\n- `sortBy`: name, email, createdAt, or lastLoginAt\n- `sortOrder`: asc or desc\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "maxLength": 100,
              "description": "Search by name or email"
            },
            "required": false,
            "description": "Search by name or email",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "customer",
                "agent",
                "admin",
                "owner"
              ],
              "description": "Filter by role",
              "example": "agent"
            },
            "required": false,
            "description": "Filter by role",
            "name": "role",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by active status ('true' or 'false')"
            },
            "required": false,
            "description": "Filter by active status ('true' or 'false')",
            "name": "isActive",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1,
              "description": "Page number"
            },
            "required": false,
            "description": "Page number",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "Items per page"
            },
            "required": false,
            "description": "Items per page",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "name",
                "email",
                "createdAt",
                "lastLoginAt"
              ],
              "default": "createdAt",
              "description": "Field to sort by"
            },
            "required": false,
            "description": "Field to sort by",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/agents": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get available agents for assignment",
        "description": "\nRetrieve a list of users who can be assigned to tickets (agents, admins, owners).\n\n**Access Control:**\n- Requires agent, admin, or owner role\n- Organization context required\n\n**Use Cases:**\n- Populating assignee dropdown in ticket forms\n- Displaying available agents for workload distribution\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "List of available agents",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get current user profile",
        "description": "\nRetrieve the authenticated user's profile information.\n\n**Notes:**\n- Returns profile regardless of organization context\n- Does not include organization-specific role information\n- Use GET /api/auth/me for organization memberships\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Current user's profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentProfileResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Update current user profile",
        "description": "\nUpdate the authenticated user's profile information.\n\n**Updatable Fields:**\n- `name`: Display name (2-100 characters)\n- `avatarUrl`: Profile image URL or null to remove\n\n**Notes:**\n- Email cannot be changed through this endpoint\n- Changes take effect immediately\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateProfileResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{userId}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user by ID",
        "description": "\nRetrieve detailed information about a specific user in the organization.\n\n**Access Control:**\n- Requires agent, admin, or owner role\n- User must be a member of the current organization\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to retrieve",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to retrieve",
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found in this organization",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "User not found in this organization"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Remove user from organization",
        "description": "\nRemove a user from the current organization.\n\n**Access Control:**\n- Requires admin or owner role\n- Cannot remove yourself\n- Cannot remove the organization owner\n\n**Effects:**\n- User loses access to this organization\n- User's tickets are preserved (for audit purposes)\n- User account is not deleted (they may belong to other organizations)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to remove",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to remove",
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "User removed from organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RemoveUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Cannot remove this user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Cannot remove yourself or organization owner"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User is not a member of this organization",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "User is not a member of this organization"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{userId}/role": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Update user role",
        "description": "\nChange a user's role within the organization.\n\n**Access Control:**\n- Requires admin or owner role\n- Cannot change your own role\n- Cannot modify owner role (owners must transfer ownership)\n\n**Role Hierarchy:**\n- customer: Can only manage own tickets\n- agent: Can manage assigned tickets\n- admin: Full access except organization settings\n- owner: Full access (cannot be assigned via this endpoint)\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to update",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to update",
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateRoleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input data or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Cannot modify this user's role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Cannot change owner role or your own role"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{userId}/deactivate": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Deactivate user account",
        "description": "\nDeactivate a user's account, preventing them from signing in.\n\n**Access Control:**\n- Requires admin or owner role\n- Cannot deactivate yourself\n- Cannot deactivate the organization owner\n\n**Effects:**\n- User cannot sign in\n- Active sessions are invalidated\n- User's tickets and data are preserved\n- Can be reversed via reactivate endpoint\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to deactivate",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to deactivate",
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "User deactivated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeactivateUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Cannot deactivate this user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "default": "Cannot deactivate yourself or organization owner"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{userId}/reactivate": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Reactivate user account",
        "description": "\nReactivate a previously deactivated user account.\n\n**Access Control:**\n- Requires admin or owner role\n\n**Effects:**\n- User can sign in again\n- No data is modified or restored\n- User retains their previous role\n",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to reactivate",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "User ID to reactivate",
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Organization ID for context",
              "example": "550e8400-e29b-41d4-a716-446655440000"
            },
            "required": true,
            "description": "Organization ID for context",
            "name": "x-organization-id",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "User reactivated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReactivateUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or session expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for this action",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  }
}